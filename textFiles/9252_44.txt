Abstract 
 
The main aim of this project was to build an application for allowing users to track their medical 
records as they recorded from a medical device. More specifically, users will have the possibility 
to see their recordings in analytical form and also some more vital measurements concerning 
their health will be presented. Moreover, users will have the capability to choose a fitness goal 
and to be provided with some feedback based on their records. Our aim is a part of the grand 
goal of personal medicine which is the creation of a complete system for recording all aspects of 
our lives. We extended the Indivo platform by adding some new features on it and for our 
implementation we used real data from a patient’s activity during a week as they recorded from 
actibelt®.  
 For achieving our goal we did the following: 
? We installed the Indivo platform successfully on our computer, something which took us 
a lot of hours, and we defined a starting point for starting our implementation by 
experimenting with the source files of it. (See pages 27-30) 
? Furthermore, we managed in the end, after a lot of research and interaction with many 
companies and research centres, to find some real patient’s data for importing them in 
our database. (see pages 28-29) 
? We implemented analytical representations of data (see page 32) and we calculated some 
vital measurements which were not recorded from actibelt® by combining the data we 
had with some methods and formulas we found through our research (see pages 33-37).  
? Finally we started implementing the idea of providing appropriate feedback to users 
something which was created by giving the possibility to users to define some fitness 
goals (see pages 37-38). 
? Our results, present how our application looks like and what we managed to implement 
in the end (see pages 40-53).  
Due to the fact that this field of personal medicine is a very new one, it is certain that approaches 
like ours will attract the attention of many researchers in the near future with the grand goal of 
giving lifestyle advice to every user who shares his medical records on an application like this. 
So, there is plenty room for improvement both on our application and to this field and for that 
reason some ideas are presented in the last chapter of our dissertation (see pages 58-59).  
 
 
 
Acknowledgements 
 
I would like to thank my supervisor Julian Gough for his ideas and his guidance during the 
whole duration of my project. 
I appreciate the willingness of Dr. Tom Gaunt from the department of Social Medicine to help us 
on finding some real data. 
I am grateful to Martin Daumer from SLCMSR for sharing with us some real data which were 
recorded from their medical device (actibelt®).  
Also, I would like to thank Christian Lederer from SLCMSR for the creation of the data we were 
given and the analytical description of their values.   
 Finally, I am grateful to Dmitry Chornyi from Indivo forum, for his help on Indivo installation.   
 
 
 
 
 
 
 
 
 
 
 
 
 
 
Table of contents 
 
Chapter 1: Project outline 
1.1 Introduction........................................................................................1 
1.2 Aims and objectives...........................................................................2 
1.3 Dissertation outline............................................................................3 
 
Chapter 2: Background and general context 
2.1       Introduction........................................................................................4 
2.2       Why people share medical data.........................................................5 
2.3       Surveys and statistics.........................................................................6 
2.4       Medical data privacy..........................................................................7 
2.4.1 Ethical and social issues...............................................7 
2.4.2 Legal issues..................................................................8 
2.4.3 Security issues............................................................10 
2.4.3.1 Anonymity......................................11 
2.4.3.2 Secure data storage and 
authentication..................................13 
2.5       Indivo...............................................................................................17 
2.6       actibelt®…………………………………………………………...20 
2.7       Existing applications for online medical data………………..........21 
2.7.1 Google Health.............................................................22 
2.7.2 Microsoft HealthVault................................................23 
2.7.3 Dossia.........................................................................24 
2.8       Summary..........................................................................................24 
 
 
 
 
Chapter 3: Project design 
3.1       Introduction......................................................................................25 
3.2       Problem specification.......................................................................26 
3.3       Installation of Indivo platform.........................................................27 
3.4       Data from actibelt®………………………………………………..28 
3.5       Getting into Indivo………………………………………………...29 
3.6       Implementation……………………………………………………31 
3.6.1 Plotting the data from actibelt®…………………….32 
3.6.2 Calculation of metabolic equivalent (MET)...............33 
3.6.3 Calculation of calories burned....................................33 
3.6.4 Calculation of maximum oxygen 
consumption...............................................................35 
3.6.5 Calculation of heart rate.............................................36 
3.6.6 Implementation of fitness goals..................................37 
3.7       Summary..........................................................................................38 
 
Chapter 4: Results 
4.1      Introduction.......................................................................................39 
4.2      Plots of actibelt® data……………………………………………...39 
4.2.1 Weekly stats................................................................39 
4.2.1.1 Minutes of low 
activity..................................................40 
4.2.1.2 Minutes of medium 
activity..................................................40 
4.2.1.3 Minutes of high 
activity..................................................41 
4.2.1.4 Activity temperature............................42 
4.2.1.5 Walking vs. Running 
steps......................................................42 
4.2.2 Daily stats...................................................................43 
4.2.3 Hourly stats.................................................................45 
4.3       Metabolic equivalent stats................................................................46 
4.4       Calories, BMR and BMI..................................................................47 
4.5       Maximum oxygen consumption (VO2 max)...................................48 
4.6       Heart rate..........................................................................................49 
4.7       Fitness goals.....................................................................................52 
4.8       Summary..........................................................................................53 
 
Chapter 5: Critical evaluation and conclusions 
5.1       Introduction......................................................................................54 
5.2       Achievement of aims and objectives................................................54 
5.3       Project’s evaluation..........................................................................55 
5.4       Conclusions......................................................................................57 
 
Chapter 6: Future work 
6.1       Introduction......................................................................................58 
6.2       Extensions in our project..................................................................58 
6.3       Further development........................................................................59 
 
Bibliography and links.........................................................................60 
 
Appendix................................................................................................65 
 
 
 
 
 
 
 
 
1 | P a g e  
 
CHAPTER 1 
 
Project outline 
 
 
1.1 Introduction 
In our days, personalized medicine plays a big part in people lives. Even if there were 
studies for many years, only the latest years some applications were created to allow 
people keeping their medical data online. Because personal medical information is 
very sensitive people are uncertain if they can trust an online application for keeping 
their records. It is very encouraging, that as technology evolves, the number of people 
who use these applications is increased rapidly. Moreover, many people combine the 
use of medical devices with online medical applications for recording their medical 
information. Apparently, this constantly growth of personalized medicine is going to 
completely change our lives and society in the next two decades.  
 
Our project will try to contribute to this field by creating an online application which 
will not only display analytically some recordings from a medical device but also will 
calculate some other vital parameters concerning the health of the individual. Our 
grand goal we have in mind is to manage to convert a simple medical device to 
lifestyle advice. This means that we want to offer some feedback and possible 
suggestions to each user who uses our application in order to help him to keep his 
health status in his desired levels.  
 
Our first idea was to implement an application based on open source software 
(Dossia) and to contribute to its security which is the most important aspect on these 
applications. However, after interaction with Dossia, they suggested to use Indivo on 
which Dossia is built and to make our work. Because this field of personal medicine is 
a new one, it was hard enough to define our objectives. After a lot of research both on 
security aspects of Indivo and other similar applications we concluded that it would be 
more vital if we could contribute to Indivo by making our own application. So, we 
decided to extend Indivo platform for completing our goal. Our wish was to use some 
real data from patients in order to use them for making a new application. After a lot 
of research and interaction with many companies and research centers, we managed to 
get some real data from actibelt® which helped us to implement our ideas. We have 
to mention, that even if our approach would be easier by implementing it as a simple 
web application, we decided to try to fit it in a world-leading existing platform in 
order to provide reliability and a high level of trust to our future users.  
 
In this chapter we will present the aims of our project and we will define its 
objectives. Moreover we will give a general description of the dissertation’s outline. 
 
2 | P a g e  
 
1.2 Aims and objectives 
 
The aim of the project is to build an application which will contribute to the field of 
personalized medicine. More specifically, we will implement an application where 
someone who has some health data which were recorded using a medical device, he 
can see a detailed analysis of them and also to see some other vital parameters 
concerning his health which are not recorder from this device. Moreover, he will be 
provided with some feedback by defining some fitness goals for improving his health 
status.  
 
The objectives for meeting our aims are the following: 
 
? Find an open sourced platform of personal medicine for completing our goal. 
In order to provide reliability to our project we have to use a well known 
platform and to extend its functionality.  
  
? Install the platform and understand its functionality. We have to be familiar on 
how this platform works in order to be in position to extend it. 
 
? Getting some real patient’s data. We must find some real patient’s data which 
would be recorded from a medical device. 
 
? Implementation of our application. Our application contains three parts: 
 
1. Make analytically data representation for giving the user a well 
detailed view of his data. 
2. Try to find and calculate some other vital parameters which are not 
recorded from the device he used. 
3. Provide feedback to the user for improving his health by defining some 
fitness goals. 
 
 
 
 
 
 
 
 
 
 
3 | P a g e  
 
1.3 Dissertation outline 
The dissertation consists of five parts. 
Firstly, in chapter 2, we will present the background and the general context of the 
project. We will focus mostly on security aspects which is very vital for applications 
of personal medicine. 
Afterwards, in chapter 3, we will give a detailed description of what we implemented 
and how. In this chapter will present all the procedures and tools which were used for 
achieving our aims. 
Then, in chapter 4, we will present the results of our implementation. We will try to 
give the reader a detailed view of how our application looks like providing some 
further information for its results.  
In chapter 5, we will make a critical evaluation of our work. We will try to be as much 
objective we can for giving the reader a clear understanding if our objectives were 
fulfilled and with what methods and what would have done for getting better results. 
Moreover, we will try to give some conclusions of our work. 
Finally in the last chapter, we will give some ideas on extending our work for future 
development. 
 
 
 
 
 
 
 
 
 
 
 
 
 
4 | P a g e  
 
CHAPTER 2 
 
Background and general context 
 
 
2.1 Introduction 
In our report we will try to define the most significant aspects of the new rising 
technology which allows people to share medical data online. All personal medical 
data are highly sensitive for many people so we will try to focus both on ethical and 
social issues concerning the data privacy and on security issues which are very 
important for ensuring the safety and the confidentiality of these data. In addition, we 
will present some good efforts that have been made in this area concerning the 
security of these applications in order to point out how crucial and sensitive is the 
usage of them. Moreover, we will give an overview of the Indivo platform which was 
used for the implementation of our application and also an overview of actibelt®, real 
data from which was used for achieving our goal. 
Firstly, we will try to show the importance of sharing medical data online by 
providing some examples and also by showing statistical results of different surveys. 
Secondly we will try to deal with data privacy. We will focus on the main two aspects 
which deal with data privacy. One is the ethical, legal and social issues and we will 
try to point out the insecurity that many people feel when sharing so sensitive 
personal data and also some laws that changed through these years trying to solve this 
issue. The other is how data can be stored securely and keep their confidentiality. We 
will present some mechanisms for keeping data private and safe and also 
anonymously and authenticated. Furthermore, we will try to give the reader some 
details about the Indivo platform and actibelt® that was used in our case pointing out 
their importance on the field of personal medicine. Finally we will describe three 
popular applications which exist today and serve a lot of people and we will mention 
some general aspects of them. 
 
 
 
 
5 | P a g e  
 
2.2 Why people share medical data 
As technology evolves, even more internet applications are created for making lives 
of people easier. One of them is an application which helps people sharing their 
medical data online with others. All these years, people hold their medical data in 
papers which sometimes creates problems. In many cases these data are hard to find, 
maybe are incomplete or there are different parts of them in different places. 
Electronic medical data provide a quick, shareable and up-to-date source of 
information [1]. In that case, everyone can access and update his data at any time 
something that helps him to be constantly informed about his health. Moreover, 
someone who shares personal medical data online with others he can compare them 
with some other from different people in order to have a general view if he is 
considered healthy enough comparing to others and for what data he may be worried 
about. Furthermore, anyone who wants to have his medical data online, he can 
authorize his personal doctor for constant surveillance of his data in order to be 
informed immediately for any change in any of them. In other words, the online 
storage of medical data and interaction between people is considered something 
revolutionary in our days and we can notice that this idea is adopted from many 
people every day. 
A case which points out the importance of sharing medical data is the case of a person 
named Dave deBronkart [2], who had Stage 4 kidney cancer. When his doctor 
informed him about his problem he handed him a prescription slip. On it he’d 
scribbled ACOR.org (Association of Cancer Online Resources). After 11 minutes of 
submitting his first post, he received recommendations for top specialists, including 
links, from patients on the website’s kidney-cancer list. After 30 minutes he received 
an e-mail from a member of this site who suggested him which scans might be 
appropriate and gave him details about interleukin-2, the only treatment at the time 
that resembled the cure. Now, deBronkart is known as the “e-patient Dave” and he is 
an online activist on sharing online medical data. Along with Dr.Daniel Sands who is 
the physician who helped him in 2007 to kick his cancer into remission, they created 
the Society for Participatory Medicine which encourages patients to learn as much 
possible they can about their health and also helps doctors to support them on this 
data-intensive quest.  
 
 
 
 
 
 
6 | P a g e  
 
 
2.3 Surveys and statistics 
Some surveys through the last years showed us that there are a lot of people who 
trying to get medical information from the internet. According to a survey which took 
place in United States in November of 2000, 52 million people have used the World 
Wide Web for obtaining health and medical information [3] and access to medical 
information can be done through 20.000 to 100.000 health related websites [4]. 
Another survey which completed in March 2000 showed that 53.5% of participants 
had used the web for gaining medical information [5].  These results approximately 
10 years ago pointed out that internet was broadly used from people who were 
interested in medical information. By combining these results with the results of 
another survey which took place in Canada five years later and concluded that 58% of 
people used the web for gaining medical information [6] we can see a significant raise 
of people who searching online health information. In addition, if we consider the 
rapid evolution of social networks were people can share different kind of 
information, it is almost sure that the idea of sharing medical data is a really good one 
with a bright future. 
On the other hand, there is still a large amount of people who is not familiar with that 
idea. A survey from Columbia University in 2006 [7] which asked people if they have 
heard anything about Electronic Medical Records (EMR) had the following results:  
 
Have read or heard about program  26 % 
Have not read or heard about program 62 % 
Not sure 12% 
Figure 2.1: Results of survey [7] 
 
As we can see from the above table only a 26% was familiar with this program. 
However, most of them believe that such an idea will be appealing with many 
benefits. More specific: 
? 55% believe that medical errors will significantly decreased 
? 60% believe that healthcare cost will be decreased 
? 68% believe that the quality of care will be improved by reducing unnecessary 
tests and procedures 
Although electronic medical recording seems a good idea to the majority of people, 
there is a 62% who believe that this idea is difficult to ensure patients privacy. 
Another survey which focus on privacy and if people feel that it overweight the 
expected benefits from this application had the following results: 
 
7 | P a g e  
 
Expected benefits outweigh potential risks 29 % 
Privacy risks outweigh expected benefits 42 % 
Not sure 29 % 
Figure 2.2: Results of another survey [7] 
 
As we can see from the table, about half of the people seemed concerned about how 
private their record would be kept, something which until today is the major concern 
for building such an application. Due to this fact, a recent study on electronic medical 
records use by the California HealthCare Foundation [8] found that the 15% of the 
1849 adults surveyed would conceal information from a physician if the doctor had 
his medical records in electronic form with the ability to be shared with other groups. 
Also a 33% would consider hiding information.  As a matter of fact, people become 
suspicious when they suspect that any personal data that want to be kept secret is 
shared with others without their permission. So, they must be persuaded somehow 
that the data they want will remain confidential.  
 
 
2.4 Medical data privacy 
A lot of people consider their personal medical information highly sensitive and they 
feel that the accessing of them must be strongly protected. This issue remains vital for 
many decades. There are many issues concerning how someone will be assured that 
their personal medical data will not be available for public view. As Mark Hadson, a 
former health insurance company employee, states: “I can tell you unequivocally that 
patient confidentiality is not eroding-it can’t erode because it’s simply nonexistent” 
[9]. By sharing medical data someone feels increasingly anxious about the privacy of 
their information. This is totally justified due to the fact that under current law and 
practices their identifiable medical data can be shared with insurance companies, 
researchers, government and others [10]. 
The main issues which deal with medical data privacy are: 
? Ethical, legal and social issues 
? Security issues 
 
2.4.1 Ethical and social issues 
It is obvious that anybody has the right to decide which medical data wants to share 
with others and which not. Medical history of each patient can include past physical 
status, diseases, disabilities, treatments and medications. Also some records may 
include material on mental health and psychological stability something that it is easy 
to understand that this information must remain private. In addition, some information 
that may be included considers demographic information such as education, 
8 | P a g e  
 
employment status and marital status [11]. So, there is an atmosphere of distrust about 
the confidentiality of electronic medical information. A possible publication of some 
highly sensitive data can result to humiliation of the individual, loss of reputation and 
risks to financial status [12]. Sometimes someone who feels that their data don’t 
remain totally private and he doesn’t want them in any case to be for public 
knowledge, maybe he can start hiding information or worse giving fake information. 
This, of course, is something that really doesn’t help the person to face and solve any 
medical problem he has, because anyone who wants to help him he will suggest 
something that will not solve his actual problem. A survey showed that 43% of people 
had felt that by keeping their medical records in electronic form is something that 
doesn’t ensure them that they will be kept private against their will. Moreover, a 51% 
were worried about the activities of government [13].  
 
As we know, the physician-patient relationship is confidential. This means that every 
sensible data or record of the patient must be kept secret. So, any physician who may 
want to share medical data with others must keep his patient anonymity. Except this 
patient-doctor relationship which remains confidential in most cases, privacy of 
medical data is not so clear because the current legislation differs across countries. 
Privacy may be conditioned in cases some information have the legitimate interest of 
government. In that case a patient can accept or reject the publication of his medical 
data. A decision like this can be taken after the patient is properly informed about the 
risks and benefits of such disclosure [14]. A good example which shows the violation 
of confidentiality is when a worker in a Florida state agency that conducts 
“anonymous and confidential” testing for HIV, decided that he can do something to 
protect people from infection. So, he downloaded the list of patient who had AIDS 
and distributed it to his friends encouraging them to avoid any date with someone 
from the list. This of course exposed thousands of people possibly wanted to keep 
secret his problem [15]. As we can see from the above example, Internet is the most 
convenient and cheapest way of distributing data. But, in any case the public who may 
have access to these data must have legitimate reasons to do that. For example, there 
may be some groups which are interested on some rare diseases or some investigators 
with scientific perspectives who have reasonable claims to mine the data, but they 
cannot mount the financial and administrative resources to access privately-held 
databases. So, how the conflict between use of public human data and public access 
can be resolved? This question remains unsolved until today [16]. 
 
2.4.2 Legal issues 
All these years, different laws tried to deal with this problem and to make patients feel 
secure about their personal medical data. Anyone can wonder why is so difficult for 
our laws to be adjusted in order to solve the problem of medical data privacy. 
However, the answer is not so simple because like all ethical values, medical data 
privacy is often balanced against competing other ethical values and concerns [17].  A 
typical example is the American Medical Association’s (AMA) Code of Medical 
9 | P a g e  
 
Ethics which begins with a clear affirmation of the privacy right and a strong 
prohibition against disclosures: “The patient has the right to confidentiality. The 
physician should not reveal confidential communications or information without the 
consent of the patient UNLESS provided by law or by the need to protect the welfare 
of the individual or the public interest” [18]. This exception which allows disclosures 
for the benefit of the patient or the public made many people to argue if this exception 
is totally canceling the rule.  
On the other hand, in January 1999 the Maine legislature enacted a new tough law 
which prohibits the release of a patient’s medical information without his written 
permission and this prohibition was backed up with heavy fines ($50.000 per patient) 
for violation [17]. This rule had terrible results in whole society anyone for his 
reasons. For example, friends and relatives of a patient couldn’t learn about his 
medical status, newspapers told that they cannot report accident victims and the most 
important was that doctors could not compare notes for the same patient without his 
written permission and clinical labs refused to give patients their results over 
telephone [19]. As we can see from the above 2 examples neither the rule which gave 
the privacy right of medical data with an exception, nor the rule which tried to give 
too much privacy was able to cope with the needs of the society.  
The most recent legislation on this issue is the Health Insurance Portability and 
Accountability Act (HIPAA) [20]. Although this Act trying to protect electronic 
medical data in a general framework, there are still some issues. For example, it 
doesn’t cover medical information which may be found in financial records, education 
records and employment records [21]. Moreover, even if HIPAA defines that 
generally access to someone’s medical records is obtained when this person agrees 
with that, in reality there is no other choice but accepting sharing health information 
in order to obtain care and insurance. So, in your information may have access: 
? Insurance Companies 
? Government Agencies 
? Medical Information Bureau (MIB), which is a central database of medical 
information shared by insurance companies 
? IntelliScript and MedPoint, which are databases that report prescription drug 
purchase histories to insurance companies 
? Employers 
? Justice, for Court Cases 
? Other disclosures 
As we can see, someone might be forced to provide some personal medical 
information against his will. Furthermore, HIPAA makes a distinction between 
10 | P a g e  
 
Electronic Health Records (EHR) and Personal Health Records (PHR). “An EHR is 
held and maintained by a health care provider and may contain all the information that 
once existed in a patient’s paper medical record, but in electronic form. PHRs 
universally focus on providing individuals with the ability to manage their health 
information and to control, to varying extents, who can access that health 
information” [22]. In our case, we focus on PHRs for which there are 3 main 
concerns: 
1. the host’s ability to access and disclose personal medical information under 
specified circumstances 
2. the hosting site’s security protocols 
3. subpoenas 
In contrast to EHRs which are designed for exclusively use by health care providers, 
PHRs are available to the consumer and maybe to some medical providers that the 
consumer has given his authorization [23]. However, in both EHRs and PHRs the 
HIPAA has many similarities because in both cases it has to do with medical data in 
electronic form.  
In Europe, the European Internet Task Force published a report in 2005 for protecting 
online data [24]. According this report, all European countries have been 
recommended to: 
 
? raise the awareness of Internet users 
? apply existing legislation in a coherent and coordinated way 
? develop and use privacy-compliant, privacy-friendly and privacy- enhancing 
technologies 
? build trusted mechanisms for control and feedback 
 
 
 
2.4.3 Security issues 
Although ethical, social and legal issues remain until today the major concerns for 
sharing medical data, there are also some crucial security issues which make the 
patient who want to share their medical information to be very cagey. By the term 
security issues we refer not only to some unauthorized access that may someone has 
in personal data of someone else, but also how medical data are stored securely and 
under which mechanisms and how a patient can be assured that his data are as 
confidential as he wants.  
All web applications consider their security as one of the most important aspects in 
order to fulfill the potential they give to users. Many of them have been the target of 
hackers who are trying to access their databases for getting some useful information 
for them or just for fun. Unfortunately, in the past there were many attacks not only 
11 | P a g e  
 
on websites which were created from companies or individuals, but also some very 
important websites such as CNN and White House [25]. So, many people are 
wondering how safe internet applications are and if their personal data on them can be 
kept secret. The following example shows that there are ways of keeping a web 
application safe. An OpenHack contest which took place in October 2002 challenged 
hackers to break into Microsoft and Oracle Internet based web application. The 
Microsoft application took 355.00 hits and the Oracle 311.000 hits but there weren’t 
noticed any theft of data. This means that these two web applications were very well 
secured not allowing any ambitious hacker to steal something from them. As a matter 
of fact, security can be guarantee that a web application will remain safe only if this 
application was properly implemented with all necessary security mechanisms which 
Microsoft and Oracle obviously do. We will try to define the main aspects concerning 
security providing some good techniques for keeping data safe. 
 
2.4.3.1 Anonymity 
Many people prefer to share medical data with others but they want to do that 
anonymously. This is a vital parameter for someone who decides to share his personal 
medical information. Keeping the anonymity of someone’s medical data is something 
very difficult mostly because except medical data, a person can give some other 
information such as birth date, ZIP code, address and many more. Even if he didn’t 
give his name, by combining other information, someone may detect the person if he 
wants. All these years many approaches tried to deal with this problem and to solve it.  
 
A very good approach which solved this problem is the Datafly System [26]. This 
program interfaces a user with an Oracle server, which accesses a medical database 
and works as we can see in Diagram1. Datafly works by automatically aggregating, 
substituting and removing information where is necessary and providing only the 
most general information which are useful to the recipient. The anonymity level can 
be between 0 and 1. When anonymity is 0, this means that there is no anonymity at all 
and all data as it was in original database are passed to recipient and when anonymity 
has the value 1, the data which are passed to recipient is the most general possible 
ones.  
 
 
12 | P a g e  
 
 
Figure 2.3: How DataFly system works [26] 
 
 
 
Another similar approach is the ?-Argus system [27] which is a computer program 
that applies statistical disclosure control techniques to microdata. This program is 
very similar to Datafly program, but although Datafly succeeds anonymity by using 
generalization as the primary mechanism, ?-Argus system blanks out the outlier 
values at the cell-level with the cell-suppression process. 
Even if these 2 systems are very effective, when data is in completely anonymous 
form, there is a possibility not contain sufficient details for all users, so when 
individuals can be identified by released data, care must be taken and enforced by 
procedures and policies [28].  
Although these two programs seem to handle anonymity well, there are also other 
approaches which try to make anonymous medical data. One of them is by using one-
way hashing algorithms. Two very well-known hashing algorithms which are used 
broadly are the MD5 [29] and the Standard Hashing Algorithm (SHA) [30]. With the 
use of hashing on someone’s name and also on other information which are capable of 
his identification, this approach was used in France. Bouzelat et al. [31], [41] 
standardized a protocol for coding name using SHA one-way hashing. Due to the fact 
that there is no practical algorithm which can determine the value of the hashing 
name, their method was registered with Service Central de la Securite des Systemes 
d’information (SCSSI). However, there are some practical problems in the 
implementation of one-way hashes. A dictionary attack is possible which hashes a list 
of names and looks for matching hash values in the dataset. This attack can be 
avoided by encrypted the hash or by hashing a secret combination of identifier 
elements or both [32]. 
 
 
 
 
13 | P a g e  
 
2.4.3.2 Secure data storage and authentication 
A lot of people want to transfer data from and to web and there are cases that these 
data must be invisible to anyone else and must be stored securely. These highly 
sensible data such as credit card details or personal medical data somehow must be in 
hidden form in case a user doesn’t want to be visible to anyone. Also, they must know 
that they can trust the Internet for keeping their data private and integral. For that 
reason many internet application use the Secure Sockets Layer (SSL) protocol which 
developed by Netscape and provides the secure transmission of a message over 
Internet. SSL is the standard security technology which creates an encrypted link 
between a browser and a web server and ensures that all data that will be passed 
through this link will remain private and integral. SSL is used by the majority of 
websites when they want to protect some sensible data of their customers [33]. SSL 
has three main goals: 
? Secure data privacy 
? Ensure data integrity 
? Authenticate the client and server to each other 
We will try to describe in simple words how SSL works [34], [35] 
In our case, let suppose that a user A wants to send some personal medical data to a 
server B. So A can be assured that his data will remain confidential (privacy), cannot 
be altered along the way (integrity) and that these data will be sent to B and not to 
someone he doesn’t want to (authentication).  SSL relies on public key cryptography. 
Although in normal encryption two parties can share a key or password for encrypting 
and decrypting messages, it doesn’t solve the problem of giving the password to 
someone you not trust. For that reason, in public cryptography each party has two 
keys, a public and a private key. Information which is encrypted with someone’s 
public key can only decrypted with the private key. The public key is visible to 
anyone but each person has a different private key. So, privacy is achieved by the 
encryption of a plaintext to a ciphertext. More specific, when user A decides to send 
his data to a server B, he connected to B. B then sends A the public key in order to use 
it for the encryption of medical data (plaintext). After that, B has the private key with 
which will use for decrypting the ciphertext (encrypted medical data). For maintaining 
data integrity the above negotiation is not enough. Always there is a chance an 
attacker to receive the ciphertext which A sends to B, to alter it and to forward it to B. 
For avoiding such an attack we send a message digest along with the ciphertext for 
achieving data integrity. A message digest is a fixed-length representation of the 
message. Message digest is something that declares that this message was encrypted 
from A. The following diagram shows the mechanism of achieving privacy and 
integrity.  
  
14 | P a g e  
 
 
Figure 2.4: How SSL works [35] 
 
 
The last goal of SSL is to provide authentication. By authentication, user A will be 
assured that he sends his data to server B and not to someone else. For achieving 
authentication SSL uses digital certificates. At the beginning of the SSL session 
between A and B, B sends to A a copy of his digital certificate which is an electronic 
document and contains information of B. Along with these information, the certificate 
contains also the public key of B which will be used for the encryption of data. Below 
we can see an example of this certification. 
 
15 | P a g e  
 
 
Figure 2.5: SSL Certificate [34] 
 
Despite the fact that SSL is the most common protocol for ensuring the privacy, 
integration and authentication of online data, there are also other approaches which 
tried to deal with this issue. 
An authentication framework for e-health systems was proposed in 2007 [36]. In this 
work, Al-Nayadi and Abawajy proposed a two level authentication protocol for p2p-
based e-health system which provides integrated services to health care providers. The 
figure below describes this protocol. 
 
Figure 2.6: An Authentication Framework [36] 
16 | P a g e  
 
As we can see the authentication is based on three different certificates (identity, 
attribute, consent) which all together identify the person (HP). When HP requests for 
data, first is identified by the Local Gateway (LGW). After that, the GW gathers the 
other two certificates from The Attribute Certificate Authority (ACA) and the Consent 
Certificate Authority (CCA) which define the roles and accesses the user has. Then, 
HP sends a data request (R) to Remote Gateway (RGW) along with Attribute 
Certificate (AC) and Consent Certificate (CC). When RGW receive the request, sends 
the CC and AC to CCA and ACA respectively for verification. Verification of these 
two certificates authenticates the person who wants to access data. This protocol 
provides strong authentication and adds further confidence of security in systems. 
Another good approach in sharing medical data is an encrypted search engine which 
implemented in NEC Labs China in Beijing [37]. The authors of this paper managed 
to maintain data confidentiality and access pattern privacy of a patient who authorized 
others to access his medical data, without any loss of them to an unauthorized person. 
This means that someone who wants to share medical data with someone else, he is 
assured that these data will be visible only to him and they cannot be accessible to 
someone else who is not authorized to do that.  They created a prototype for the 
encrypted searched engine which is named Secure Public Space (SPS) and is the one 
we can see in the following figure.  
 
Figure 2.7: SPS prototype [37] 
 
They ensured confidentiality by encrypting all medical with different symmetric 
encryption keys using AES. Every patient has his own private key and according to 
this key all other keys for encrypting his medical data are generated, so nobody who 
isn’t authorized by the patient can access his medical data. Moreover, the privacy of 
search is maintained by the use of an encrypted keyword and a decryption key. When 
someone wants to search a keyword uses the encrypted keyword for searching the 
encrypted index. All results are decrypted on searcher’s side, so nobody except the 
searcher and the patient knows the searching results and which keyword was used for 
17 | P a g e  
 
getting them. In addition, their solution provides multi-level retrieval. Before the 
encryption of medical data, the patient defines the data privacy’s level and then he 
will use the corresponding key to encrypt them in the encrypted index. Also, patient 
defines the privacy level of a searcher and generates the corresponding decryption key 
in the keyword authorization. So, the searcher’s key can only decrypt information 
which is under his privacy level. Although this mechanism considered very reliable 
for someone who wants to have his sensitive medical data at an online third-party 
server, there are some open problem in this approach and need further research. The 
major problem is the conjunctive keyword search which is a common method in 
search engines but it is very difficult for an encrypted search engine.  
 
2.5 Indivo 
Indivo is the original personally controlled health record (PCHR) system. A subset of 
PCHR enables an individual to own and manage a complete, secure, digital copy of 
his health and wellness information. Indivo is a specific implementation of a PCHR 
that is Internet based, provides a World Wide Web interface, and is built to public, 
open standards with an open application programming interface (API) [38]. Its 
software allows the creation of a PCHR infrastructure that exceeds the requirements 
of the Health Insurance Portability and Accountability Act (HIPAA) Privacy and 
Security Rules. Moreover, Indivo is a three-tier system and its tiers are a data storage 
tier, a business logic tier and a user interface [39]. Its implementation focuses on high 
security and full transparency which is enforced with all three tiers and all technical 
documents, API and source code are open and freely available and accessible to the 
Internet. 
The Indivo architecture is described on the figure below and demonstrates the sources 
of data, subscription agents (left), the three tiered architecture (center) and services 
that access Indivo server (right) 
18 | P a g e  
 
 
Figure 2.8: The Indivo Architecture 
 
The core of Indivo Platform is the middle tier (the business logic tier) which is the 
Indivo Server. The Indivo Server is responsible for the management of the set of 
documents that make a PCHR record. A document within PCHR may represent a 
laboratory test, medication, allergy or other piece of relevant healthcare information. 
The Indivo Server makes these documents available to client applications via the 
Indivo API. The data storage tier is used by Indivo Server for storing the various data 
documents that make up a user’s PCHR. The data storage is encrypted for protecting 
users and encryption keys are hosted on a separate physical server to preserve security 
of patient data. The user interface tier as is shown in Figure 2.9 represents the data 
contained in a patient’s record in an understandable way. Because this graphical user 
interface (GUI) obtains all data from Indivo Server, any action which tries to perform 
is passed from the middle tier via the API and thus security policies automatically 
applied. Due to the fact that GUI is designed as a client that uses an open API, the 
Indivo approach allows others to create their own user interfaces and encourage the 
application development on it. 
 
 
 
19 | P a g e  
 
Figure 2.9: The Indivo user interface showing laboratory test results. 
 
For the communication with the Indivo system, standard web protocols are used.  The 
interoperability of PCHRs with electronic medical records (EMRs) and other 
information systems is achieved by the use of standardized methods for importing and 
exporting data. Indivo handles both Continuity of Care Record (CCR) and the 
Continuity of Care Document (CCD) for information transfer and works with the 
Healthcare Information Technology Standards Panel (HITSP) on interoperability [40]. 
A mechanism called “subscription agent” is used for importing data from EMRs and 
other sources [38] An important characteristic of Indivo system is that its architecture 
is document-centric which means that the document model is adapted for information 
needed by patient-centric applications and does not simply wraps electronic health 
data. This model is open sourced and by its use, individual autonomy is achieved in 
the control of information flows both in and out of the PCHR and across a health 
information exchange. 
Indivo focuses on proving the utility of the PCHR as a platform for the development 
of patient driven applications to improve the quality and the effectiveness of the 
healthcare system. A platform like this which is built on a fully open API and 
standards, by providing patient-led security and aggregated data, enhances the 
development of an ecosystem of personalized healthcare applications. The latest years 
many researchers used the Indivo platform for building PCHR applications and one 
example is the McMaster University which developed such an application with the 
name “MyOscar” which not only utilizes the Indivo API but is built using the Indivo 
20 | P a g e  
 
code base. Furthermore, researchers at NTIU in Norway also used Indivo for the 
Norwegian health system[41].   
 
2.6 actibelt® 
actibelt® is a novel platform which captures and analyses human motion and is a joint 
development of Trium Analysis Online GmbH and SLCMSR in Munich, Germany 
[42]. More specifically, is a high-tech 3D-accelometer hidden in a belt buckle which 
objectively quantifies walking impairment. actibelt® measures high-resolution (noise 
< 0.01 g, 100Hz in three axis) long term (10x24x7, 512MB) accelerations close to 
body’s centre of mass. Its recharging is done within 2 hours using USB chargers at the 
clinical centre or the central lab. Moreover, by using different belt sizes and styles, 
different options for belt buckles (metal buckle or flex buckle) and small weight and 
size, actibelt® achieves a very high user acceptance and its usability aspects are very 
important for sufficiently long, unbiased recording times. 
 
 
Figure 2.10: actibelt® usage 
 
A well known problem so far is some invalid outcome measures in a variety of 
chronic disabling diseases because the level of a patient’s walking ability or 
impairment is usually measured by using questionnaires. Physical activity in general 
and walking ability (distance, speed, quality) in particular play a major role as patient-
oriented outcome measures in a broad range of diseases like multiple sclerosis. For 
that reason, actibelt® uses innovative algorithms for extracting a variety of 
meaningful and relevant parameters from the data which are recorded. Parameters that 
can be extracted from a 7-day recording include: 
? activity count (one mean filtered acceleration value per minute) 
? activity regions (high, medium, low) 
? activity temperature (mean activity per day) 
? number of steps in any given period of time & distribution (high accuracy, 
also at low speed) 
? distance travelled & distribution (less than 15m, 50m, 100m, 200m, 300m, 
500m, < 5% accuracy) 
? gait speed (high accuracy – >90% of the time accuracy less than 0.2 m/s) 
? gait asymmetry (e.g. limping) 
? coherence length (measure for gait quality) 
21 | P a g e  
 
? norm step (including gait phases – heel strike, toe off) 
? activity pie chart (lying/sleeping, sitting/standing, walking, running) 
? exercise induced energy consumption (body weight needed) 
? number of falls (online fall detection in preparation) 
? changes in altitude/stair climbing (precision <0.5m, in preparation) 
The actibelt® platform is in use in various international (AU, AUS, CH, CZ, ESP, FI, 
FR, GER, IT, UK, USA) multi-centre trials and clinical-epidemiological studies in 
multiple sclerosis, CAD, osteoporosis, lupus, osteoarthritis, Parkinson’s disease, 
depression, schizophrenia, fracture heeling, COPD, sport and space science. Hundreds 
of patients, including children and elderly people, have been equipped with the 
actibelt®, more than 25.000 hours of recordings have been stored and analyzed. An 
easy-to-use web-platform supports central data management, analysis, reporting and 
can be linked to any eCRF-system/eTrial software with standard web-interface (in 
particular Trium’s CT-Engine® [43]). 
  
 
2.7 Existing applications for online medical data 
Today there are a lot of applications which offer the possibility to someone to store 
his medical data online and probably to share them with other people. Despite the fact 
that most of them do not provide the desirable reliability and security mostly from 
technological aspect of view (not secure and confidential data storage and share) [37], 
a lot of people choose them for keeping their data. The latest years even more 
applications are presented providing new characteristics each time. This fact shows 
how important these applications are considered from the community and the 
significance of their existence. Moreover, when huge names in computer industry like 
Google and Microsoft are involved in this area and spend a lot of money for providing 
competitive applications for personal health information, it is easy to realize how 
crucial is this area and that is there is a bright future for applications like these. In 
addition, until today there isn’t any totally trustworthy application in its completed 
form something which points out that there are a lot of people in community who try 
to provide a perfect solution. Google and Microsoft provide today two pilot projects 
and they hope that they will receive a global acceptance by the majority of people. 
Furthermore, in USA, Dossia provides an application like this which is based on open 
source software instead. We will present these three applications which are used 
broadly nowadays by millions of people.  
 
22 | P a g e  
 
 
Figure 2.11: History of the Personally Controlled Health Record 
 
2.7.1 Google Health  
Google Health [44] was released in 2008 and is a service which allows users to have 
their personal health information online. This service provides the storing of 
someone’s health information in a central place to make the handle of them easier. 
This means that any loss of his medical records due to a move or a change in his job is 
now prevented. Moreover, by using Google Health the user can keep always his 
doctors up-to-date and also he can share information with relatives, friends and some 
health care providers. More specific, Google Health provides the following services: 
? Building of online health profiles 
? Import of medical records from hospitals and pharmacies 
? Sharing of personal health records 
? Exploration of online health services 
While building an online profile a user can enter health information such as past and 
current medications, allergies and test results or whatever else he wants. Google 
23 | P a g e  
 
Health assures the user in its privacy policy that his information will remain secure 
and never will sell it to anyone without his consent and also points out that the 
security is achieved by using state of the art technologies like encryption, firewalls 
and backup systems. 
Furthermore, Google Health gives the possibility to someone to choose any of its 
partners to see if there is a chance the user’s hospital or pharmacy to have access to 
his profile and send to it his medical records or prescriptions. With this method the 
user always will have his data updated and also an accurate medical history. In 
addition, the user can select an online health service which is integrated with Google 
Health which will have access to his information for better management of his health 
needs. 
Moreover, anyone can choose to share his profile with someone else. The user 
chooses with whom wants to share his profile and any time he can stop this sharing. 
By sharing his health information, for example with his doctor, the coordination of his 
care will be better.  
  
2.7.2 Microsoft HealthVault 
Microsoft HealthVault [45] which started in 2007 is a Microsoft’s platform for storing 
and maintaining health and fitness information. HealthVault addresses both any 
individual and healthcare professionals. Anyone who has an account can store his 
health information. Also, someone through his account can access medical records of 
other people only if he is authorized to do that. Apart from sharing medical data with 
other people, a user can share information with programs that add data to his health 
records and use data from the health records to provide health information or services 
to him.  
Another functionality of HealthVault is the capability of transferring data through 
devices. So, devices like heart rate watches and blood pressure monitors can send 
automatically the current information in someone’s record. Moreover, HealthVault 
offers some smart health solutions which combine web applications with medical 
devices for helping users to maintain their health in a good level and these solutions 
which are offered are: 
? Weight solutions for loosing or maintaining weight  
? Fitness solutions for having good fitness 
? Blood pressure solutions for managing high blood pressure 
? Organization solutions for better organizing family’s health information 
24 | P a g e  
 
? In case of emergency solutions for informing someone constantly about his 
health 
Person data privacy on HealthVault achieved by its privacy policy which states that a 
user who keeps medical records decides which information can be visible by others 
and it doesn’t release any personal data to nobody without user’s consent. In addition, 
health information of a user is kept safe by the use of highest standards of security 
which involves encryption for preventing any theft, loss or damage of them.  
 
2.7.3 Dossia 
Dossia [46] is a Personal Health Record (PHR) service which is based on Open 
Source software and its API was released in 2009. Dossia is a consortium of top 500 
US companies. Its aim is to provide to his customers medical data control for making 
better health and healthcare decisions. Dossia gathers users’ health information into a 
safe Web-based platform helping them to have a full control of their medical data. In 
addition, users have access to personalized health tools which help them to improve 
their health and to manage better their health conditions. 
The health information which is held in Dossia’s database is not only user’s data 
which entered by him but also health data from doctors, pharmacies and labs. 
Moreover, personal health records of a user are portable and at always available to 
him despite the fact he may change employers, insurers or healthcare providers. A 
very important aspect of Dossia is that health records of a user are stored securely, 
private and totally controlled by him, something which means that in case the user 
wants to share some records with others, only he decides which parts of them will be 
visible to someone else. Also, current employers, health insurers and providers will 
have access to his data only with his consent.   
 
2.8 Summary 
In this chapter we dealt with some issues that concern the use of personal medical 
information online. We pointed out the importance of these aspects of personal 
medicine and we focused both on ethical and security issues for giving the reader a 
better understanding of using an application like this. Moreover, we gave a 
description of Indivo system which is open sourced and it is used from many 
researchers around the world and actibelt® which is a novel device which records 
many parameters concerning the health of the individual. Finally we presented the top 
three applications until today which support online medical information and are used 
by millions of people. In the next chapter we will describe our project and how we 
managed to implement our ideas. 
25 | P a g e  
 
CHAPTER 3 
 
 Project design 
 
 
 
3.1 Introduction 
In this chapter we will try to describe the design of our project. We will present some 
problems which had to be bypassed and techniques that were used for implementing 
our ideas. Firstly, we will try to give the reader a more generic view of what we 
implemented and how difficult it was. Secondly, we will give some details for Indivo 
installation which was a vital part of our project. Moreover, we will describe the data 
we got from actibelt®. Furthermore, we will present some general aspects of Indivo 
platform and how we managed to use it for building our application. Finally, we will 
explain analytically each operation of our application and how it was implemented. In 
each section it is given the name of the file which is responsible for the 
implementation of each operation and it is recommended to be accessed from the 
source code for getting a better view on the way it was implemented. 
 
 
 
 
 
 
 
 
 
26 | P a g e  
 
3.2 Problem Specification 
As we mentioned before, the aim of the project is to contribute to the community of 
personal medicine by building an application which will offer some new possibilities 
to individuals. More specifically we will try to convert a simple device which records 
some health parameters (actibelt®) to a lifestyle advice. This means that a user which 
uses a device for recording some specific vital measurements will have the possibility 
to extract more vital parameters which are not recorder by it and also to be advised 
properly for the status of his health with the possibility to define some fitness goals 
and see if he is doing well on achieving them. Moreover various representations of his 
data will be presented for getting a better understanding of them. 
For achieving our goal we decided to use the Indivo platform. This decision was made 
because even if the implementation of such a web application would be easier 
building it from scratch, the Indivo platform is a reliable system which is designed 
with all necessary authentication and security mechanisms and it is used from many 
researchers on the field of personal medicine. Furthermore, we used some real data 
from actibelt®, a real device that records some vital parameters in order to have more 
accurate results in our project.  
Despite the fact that using some real data on a well-recognized and reliable platform 
is something that makes our project a vital component of personal medicine, there 
were some major difficulties and risks which fortunately bypassed. First of all, the use 
of Indivo platform contains a lot of technical difficulties both on its installation and its 
understanding of how it works because is an open project with many functionalities 
and a lot of files of source code. Also, there were some difficulties on finding real 
patient’s data and there was interaction with many companies and research centers for 
getting some data with Sylvia Lawry Centre for Multiple Sclerosis Activities 
(SLCMSR) in Germany[47] finally, to be eager to share with us some of the data 
which are recorded from their device (actibelt®). So, although this project had a big 
risk factor and some major technical difficulties, in the end we manage to solve them 
and also to make some further research on the field of biomedicine for getting some 
vital parameters for our goal. 
 
 
 
 
 
 
27 | P a g e  
 
3.3 Installation of Indivo platform 
Indivo platform in order to run on a computer and possibly to be used and be extended 
uses many tools and requires a lot of configuration on most of them. The whole 
process of Indivo installation was one of the most difficult aspects of this project and 
a lot of hours were spent on trying different methods on configuration to make it work 
properly. We will try to define some basic steps which were made in order to help the 
reader in case he wants anytime in the future to install this platform on his computer. 
It is vital to mention that the operating system on which Indivo platform was installed 
is Windows Vista. 
For the installation it was used the instructions of Indivo wiki on Indivo website but 
these are general instructions and not too much efficient especially in an installation 
on a Windows operating system [48, 49]. The tools which were used and the 
prerequisites of the Indivo installation are: 
? JDK 1.5 (Unfortunately Indivo works only on Java 5) 
? Apache Tomcat Server 5 
? PHP-Java Bridge version 4.2.2 
? Apache 2.0 or Apache 2.2 webserver 
? PHP 5.2 or greater 
? phpMyAdmin 
? MySQL 
? All five Indivo binary files [50] 
Apart from downloading and installing the above tools there are some standard steps 
which has to be made in order Indivo platform works correctly. We will try to 
describe the most important of them which are missed or are hard to understand 
through the standard instructions of Indivo website. 
First of all, in order to use Indivo, a script must run always on background. This script 
is the startStore.bat which exists in indivo-iostore-berkeleydb-core-3.1-bin.tar.gz (one 
of the five binary files which must be extracted somewhere on your computer). This 
scripts runs from a command line or a terminal. To make this script works correctly 
you have to configure log4j and this is done by creating a file with the name 
log4j.properties on “/WEB-INF/classes/” of Tomcat installation and it must have the 
contents described on [51]. For the key store and administration creation the 
createKeystore.bat and the createAccount.bat scripts must executed with the desirable 
options and they are placed on indivo-utils-3.1-bin.tar.gz file. 
 
After installing successfully the Tomcat server and including the JavaBridge.war file 
to it, for the installation of the Apache server there is extra configuration that is not 
included in the instructions. More specifically for the configuration of httpd.conf apart 
from updating the DirectoryIndex to include the index.php and the index.htm files you 
have to add some more commands to make it work properly (see Appendix 1). The 
next step is to configure the PHP which must be extracted on a new file. For its 
configuration first of all you must include this file on your PATH variable of 
Windows. Also to include the php5ts.dll and the libmysql.dll files to 
Windows/System32/ and Apache/bin files respectively. Moreover, as instruction 
mention you have to configure the package manager which is called PEAR and it is 
28 | P a g e  
 
used for installing third-party tools. So, you have to go to “../PHP/PEAR” folder and 
to run some commands as described on Appendix 2. 
 
Afterwards, you have to write some SQL code after installing the MySQL and the 
phpMyAdmin successfully. You have to login via the phpMyAdmin and to create the 
tables with as they are on Appendix 3 because they used from Indivo and support 
much functionality. 
The last thing to do if everything until then is OK, is the configuration of the PHP 
client API (indivo-client-php-3.1-lib.tar.gz) on which you must specify the correct 
paths on the apiConfig.xml file. Furthermore, a last configuration must take place for 
the user interface on Apache server as described on [52]. 
 
At this point it is vital to mention that for the successfully installing of the Indivo 
platform we made a lot of research on different websites finding and understanding 
some techniques mostly on some difficult parts of configuration and also with a 
constant interaction with Indivo forum for developers [53] we finally managed to get 
it work. 
 
 
  
3.4 Data from actibelt® 
As we mentioned before, one of the project objectives was to find some real patient’s 
data. We knew from the beginning that this objective would be very hard because 
people share medical data online with free access to everyone very rarely. The only 
data we found were some anonymously data from StatLib, a statistics community [54] 
but they proved insufficient and inadequate for our project. Moreover, we asked 
Professor Tom Gaunt from the department of Social Medicine at University of Bristol 
if there are some data available for our research but unfortunately there weren’t. So, 
we started the interaction with some companies and research centers for getting some 
data. The only response we had was from SLCMSR in Germany and they found our 
approach interesting. They presented to us the actibelt® with some details of it. After 
continuous interaction and with a short report which explained analytically the idea of 
our project they decided to share with us some real data from actibelt®. 
The data we received, concern a patient’s activity for the duration of one week. More 
specifically, these data is the outcome of the usage of actibelt® from the current 
patient on a 24-hour basis for a whole week. The days which are recorded are from 
05-06-2009 until 11-06-2009. We received two datasets from SLCMSR. The first 
contains data which present information for each minute for the whole day and the 
other contains data with some summaries from the whole week. These data in their 
original form as they received can be found on the folder of the source code of the 
project. 
The daily data consist of 3 fields. The first field (time) describes each minute of the 
day from 00:00 until 23:59 in “month/day/year hours:minutes” format. The second 
field (activitycount) is the activity counter for each minute which is an abstract 
measure for the amplitude of the activity obtained by applying some filters to the 
29 | P a g e  
 
signal. The thresholds were obtained empirically from the analysis of many 
measurements. The third field (stepsperminute) describes how many steps the 
individual took during the corresponding minute.  
 
The daily summaries data consists of 8 fields. The first field (day) describes each day 
of measurements in “month/day/year” format. The second field (meastime) describes 
the duration of measurements in minutes. The third field (time.inactive) describes the 
duration of low activity in minutes. Low activity corresponds to small movements 
during standing, sitting or lying. The fourth field (time.active) describes the duration 
of medium activity in minutes and corresponds to minutes of walking. The fifth field 
(time.exercise) describes the total time of high activity and corresponds to minutes of 
running. These regions are in good agreement with the step counter. The next field 
(activitytemp) describes the activity temperature. The last two fields (walkingsteps, 
runningsteps) describe the number of walking and running steps through the duration 
of the day.  The distinction between running and walking steps uses the fact that 
running implies short intervals without ground contact. 
 
  
3.5 Getting into Indivo 
After the successful installation of Indivo platform, we had to understand how it is 
actually works and to be familiar with many functionalities of it. Like any other new 
platform which is installed for the first time, takes some time and effort to understand 
it, on Indivo we had not only to notice it’s functionality but also to try to study it in 
depth for understanding how all these things are implemented.   
Firstly, we experimented with some different applications of it. The first time you are 
connected to Indivo you are logged in as an administrator. As an administrator you 
have the following options: 
1. Create new user 
2. Import medical record in XML format 
A new user, who can be created, can be a new administrator, a registrar, a patient, a 
provider or school. All you have to do is to give the username for creating an Indivo 
account (username@indivo.org) and the password. Moreover you have to complete 
some personal information of the user. In our case we are interested to create a user as 
a patient who can securely login and see medical information concerning his health. 
30 | P a g e  
 
 
Figure 3.1: Creating new user as admin 
 
We created a patient with the name Vasilis Tasioulas (my name) and we provided real 
personal information. Because Indivo offers to each patient a lot of possibilities we 
tried many of them to notice the interaction between them. For example, in order to 
see a growth chart you have to complete some demographics information including 
age, weight and height.   
Afterwards, we tried to study the source code and to find the parts which were 
responsible for each operation. Apparently, a platform like Indivo uses hundred of 
files for achieving its functionality.  After a lot of experiment with many of them we 
managed to define a starting point for starting writing our own application. The bad 
news were that almost everything were built using XAJAX programming language 
and because we were unfamiliar with it we had to study some tutorials for getting into 
the position of using it[55].  
After understanding how we can use Indivo, we had to load in our database the data 
we received from actibelt®. In order to use them we had to import them in exactly the 
same format they were. So, we created 2 tables in our database, one for the daily data 
and one for the weekly data. The difficult part was the date fields which were in 
different format than the default date format of MySQL tables. For managing to load 
successfully these data we used the SQL commands as described on Appendix 4. 
The next step on getting a complete view of Indivo was to find out how we can 
generate some graphs for representing the data we had. We found that jpgraph [56] 
was already installed on Indivo platform. Even if we were unfamiliar on plotting data 
using jpgraph, we decided to use it because it offers a lot of possibilities and it was 
fully compatible with Indivo. So, we experimented a lot by making some simple 
graphs in order to be in position to plot our data and to build our application. Very 
31 | P a g e  
 
helpful was a tutorial we found which explains in simple words how jpgraph is used 
and offers some simple examples for getting started [57]. 
 
 
3.6 Implementation 
For the implementation of our application on Indivo platform we had to add a new 
field on its interface which contains all our work. So, we modified the 
menu.default.xml file on “config/menus/” path of Indivo source code and we added 
the necessary tags for supporting our work and also to fit properly in the interface of 
Indivo. The tag which contains our functionality is called Actibelt. The user who has 
some data from actibelt® have the following options which are supported in separate 
tags of Actibelt: 
? Choose fitness goal 
? Show Daily MET scores 
? Show VO2 max values 
? Show Heart Rate 
? Show Calories 
? See Hourly Stats 
? See Daily Stats 
? See Weekly Stats 
For implementing each option of the above we had to create a new xajax function in 
which we made the whole work for getting the desirable results. Each of these 
functions is called by clicking the correspondent option because they are linked with 
the menu.default.xml file we mentioned before. These functions should be separate 
files included in Indivo source code and they must have the file extension 
“.function.php”.  
Because all these options (except the first one) result in one or more plots, we created 
a separate .php file for generating each graph. As we already mentioned, these graphs 
are generated with jpgraph, so we had to call these new files from our functions with 
the desirable parameters each time. The graphs we constructed are all line plots with 
some of them containing 2 y-axis.  
We will try to explain each one of these options separately and how they are 
implemented.  
 
 
 
32 | P a g e  
 
3.6.1 Plotting the data from actibelt® 
The three last options (See Hourly Stats, See Daily Stats, See Weekly Stats) plot the 
data we have from actibelt®.  
The weekly stats represent the data from the table which contains the weekly 
summaries. More specifically, this option gives the individual the possibility to see 
some summaries for his data which were recorded during the whole week. The 
function which was created is named weekly.function.php and it is called by clicking 
the “See Weekly Stats” tag. It contains 8 SQL queries for getting all the data which are 
stored in our database. Moreover, a drop down menu was created which passes each 
selection dynamically as an argument to the current function in order to present the 
kind of data the user wants. After selecting the desirable data a jpgraph file 
(lowactivity.php or mediumactivity.php or highactivity.php or activitytemp.php or 
steps.php) is used with the proper parameters for plotting these data. 
The daily stats represent the data of the individual for each minute for the whole day. 
So, the user can see a very detailed representation of his recordings. This option is 
implemented on stats.function.php of the source code. When the user selects this 
option, he has to choose a specific day from the whole week for seeing his recordings. 
For that reason, a function “storeValue” is called at first which creates the radio 
buttons for selecting the date and after clicking on an option the “showstats” function 
is called with the first argument to be the choice of date selection. The second 
argument of this function changes dynamically according to the selection of the hour 
from the drop down menu which is presented to the user. The possible values from 
each hour of the day could be from “00:00-00:59” until “23:00-23:59”. In that way 
we succeeded to plot the whole data for each minute of the selected hour of the 
selected date.  After selecting the desirable hour, 3 SQL queries are used for selecting 
the proper data and they are passed as parameters to the corresponding file of jpgraph 
(stepsgraph.php and activitygraph.php) for plotting them. A tricky part in our queries 
was the correct conversion of date field of our table to an understandable format using 
some string functions. 
 The hourly stats represent the data for each hour through the whole day. This option 
is used to give the user a more generic view of his recordings in an hourly basis. For 
this option, the hourly.function.php was created. After selecting the “See Hourly 
Stats” tag the function of this file is called and gives the user the option to select the 
specific day he wants from a drop down menu. Afterwards, 2 SQL queries are used 
for selecting the preferable data from our database and they are passed as parameters 
to the responsible jpgraph file (hourlygrpah.php and hourlygraphcount.php) for their 
representation. 
 
 
33 | P a g e  
 
3.6.2 Calculation of metabolic equivalent (MET) 
A well-known unit for describing the energy consumption through a specific physical 
activity is the metabolic equivalent or MET. Obviously, a physiologic effect of 
physical activity is that it expends energy. A MET is the ratio of energy expended 
during an activity to the rate of energy expended at rest [58]. The 1 MET corresponds 
to energy expended during rest. METs usually are calculated on an hourly basis to 
give a more accurate view of person’s activity. Some typical values of MET, which is 
the result of many scientific studies, has proposed from Ainsworth et al [59]. 
In our project, we will try to make an approximation of MET values for each day of 
the week. We created the met.function.php file which implements our idea. Because 
MET values vary due to the type of exercise, we had to calculate a summary of 
various physical activities during the whole day. We already know 3 parameters 
which define approximately this type. These are the low, medium, high activity for 
our weekly data. The low activity minutes correspond to actions like sitting, lying, 
sleeping, the medium activity minutes to walking and the high activity minutes to 
running. So, according to tables which contain different MET values for each 
exercise, we make the decision to use a mean value for these three types of exercise 
we have. For low activity we defined 1.5 MET for each hour, for medium activity 3 
METs and for high activity 8 METs. These values are the result of thoroughly study 
of our data and interaction with the person from SLCMSR who sent us the data.  So, 
after making 3 SQL queries to our database for getting the total minutes of all three 
different types of activity, we calculated for each day the MET value from the 
equation:  
“daily MET value = 1.5 / 60 * minutes of low activity + 3 / 60 * minutes of medium 
activity + 8 / 60 * minutes of high activity” 
Afterwards, we made another SQL query for getting the date values from our database 
in a UNIX_TIMESTAMP format, because it was the only way for plotting them with 
jpgraph. By passing these values as parameters to the correspondent jpgraph file 
(metgraph.php), we presented the MET values to the user for each day separately. 
 
3.6.3 Calculation of calories burned 
One of the most interesting things that someone who exercises wants to know is how 
much calories he burned during his exercise. We made an estimation of calories the 
person burned through the duration of an hour for each day. For this calculation we 
used the weight of the individual along with the distance covered in each hour. 
Moreover, we present the total calories he burned each day and we calculated both the 
person’s basal metabolic rate (BMR) and his body mass index (BMI). 
34 | P a g e  
 
In order to implement the ideas we mentioned, we had to create a new function. This 
function is implemented in calories.function.php file and is called after the user select 
the “Show Calories” tag. First of all, we had to calculate the distance covered through 
the duration of each hour. We know that our data contain information of how many 
steps the individual took on each minute. So, after finding that approximately 2.000 
steps correspond to 1 mile distance covered [60], we had to find a correlation of 
distance with calories burned. After studying and experimenting with an estimation 
we found, on how much calories are burned given the distance the person covered 
along with his weight [61], we concluded that the equation which will give us an 
approximation of burned calories is the following: 
“calories burned in each hour = weight (in kilograms) * 1.45 * number of steps 
during this hour / 2000” 
So, we made an SQL query to our database asking for a summary of steps 
(SUM(steps)) for each hour for the given day and we calculated from the above 
equation the burned calories for this hour. The most difficult part on getting this result 
was the calculation of individual’s weight. At this point, we have to mention that if 
the user wants to see how many calories he burned he has to give his weight in kilos 
on Indivo demographics information. So, we created the “getvitals” function 
(Appendix 5.2) which outputs an array which contains the age, the weight and the 
height of the individual using some JAVA functions. After calculating the calories for 
each hour we made a summary to present the total calories the person burned through 
the whole day.  Moreover, there is a drop down menu for selecting the day the user 
wants to see results from and after this selection and the above calculations, the 
calculated values are passed as parameters to the responsible jpgraph file 
(caloriesgraph.php) for making their representation. 
Basal Metabolic Rate (BMR) is an easy way to make estimation for the total calories 
intake a person needs daily for maintaining his weight. BMR is accurate enough 
especially for people with average sized body. For its calculation the parameters 
which are used are the age of the individual, the sex, the weight and the height. BMR 
can be easily calculated using the following equations both for women and men:   
“Women: BMR = 655 + ( 9.6 x weight in kilos ) + ( 1.8 x height in cm ) - ( 4.7 x age 
in years ) 
Men: BMR = 66 + ( 13.7 x weight in kilos ) + ( 5 x height in cm ) - ( 6.8 x age in 
years )” [62] 
For the calculation of BMR in our program we used the “getvitals” function we 
described above, for getting the age, the weight and the height of user and along with 
some other JAVA function we got his/her sex. So, we only had to apply these vital 
parameters to the above equation to get the BRM value of the user. 
 Body Mass Index (BMI) is the easiest way to determine if a person is underweight, 
overweight or normal. BMI is very useful on estimating a healthy body weight based 
35 | P a g e  
 
on the height and it does not actually measure the body fat percentage as many people 
think. Its estimation is based on person’s weight and height using the following 
equation: 
“BMI = weight(kg)/height2(m2)”[63] 
For calculating the BMI in our program we used the values of weight and height as it 
were calculated from the “getvitals” function as before and applied them on the above 
equation. Moreover we defined the weight status of the person by comparing the 
result with the values from the following table: 
 
 
Figure 3.2: Weight definition according to BMI 
 
3.6.4 Calculation of maximum oxygen consumption  
VO2 max is a measure of the maximum volume of oxygen that a person can use. It is 
measured in milliliters per kilograms of body weight per minute (ml/kg/min). During 
exercise, the amount of oxygen a person consumes to produce energy increases. 
However, there is a maximum level of oxygen consumption which cannot be further 
increased by training harder. Moreover, some experts believe the VO2 max is a key 
physiological determinant of someone’s performance [64]. Although a lot of studies 
tried to define the best method of calculating the VO2 max value, one of the best 
methods today is the Balke test [65]. The objective of this test is the person to try to 
run as far as possible in a specific amount of time (usually 15 minutes). A method for 
evaluating the results from this test is achieved by the following formula which was 
proposed from Frank Horwill in 1994:  
“VO2 = 0.172 x (metres/15 - 133) + 33.3” [66] 
In our project we provide the user with the maximum oxygen consumption values he 
got during each hour for the whole day. It is worthy to mention that when someone is 
resting his VO2 value is 3.5 ml/kg/min by default. We created the vo2.function.php 
file for implementing this idea. We already knew how many steps the individual took 
during each minute. So, we had to calculate how many metres was the distance he 
covered in the duration of an hour. For that reason, we made an SQL query for getting 
the summary of steps for each hour. It is well-known that 1 mile = 1609.344 metres. 
36 | P a g e  
 
As we mentioned before, 2000 steps correspond to 1 mile, so we calculated the meters 
for each hour. Afterwards, we used the above equation for calculating VO2 values 
(with the only difference they were calculated for 60 and not for 15 minutes) and we 
passed them as parameters to the correspondent jpgraph file (vo2graph.php) for 
plotting them. Moreover, as before, there is a drop down menu for giving the user the 
option to select the day he wants to see his VO2 values. 
 
3.6.5 Calculation of heart rate 
A very vital parameter on tracking your health status is your heart rate. By knowing 
you heart rate during exercise you can determine how intense your activity was. There 
are some target heart zones which represent the percentage of maximum heart rate the 
person can have and define the activity workload [67]. It is very important for the 
person who exercises to know at any time his heart rate results in order to try harder or to 
see if his results are the desirable ones. In our project we made an approximation of 
person’s heart rates during his activity on the whole week. 
 
The best method we found for calculating the target heart zones was by using the 
Karvonen formula [68]. According to this formula the individual has to calculate his 
resting heart rate for three days in a row. Ideally calculation of resting heart rate is 
when the person wakes up in the morning. Three days measurements are used for 
making the calculation more accurate. After collecting these 3 values their average 
value is used for the calculation of target heart rate zones. More specifically, the 
maximum heart rate is calculated from the equation below: 
 
“220 minus your age (A)= estimated max hr (HRMx)” 
 
Afterwards, the average resting heart rate value is subtracted from the maximum heart 
rate (HRMx) and this result is multiplied with different percentages. Finally, the 
resting heart rate is added to the above result and represents the heart rate of the 
individual on that percentage. For example if you want to calculate the target heart 
zone of 50% of maximum heart rate and you are 30 years old and your resting heart 
rate is 60 bpm, this is calculated as following. The maximum heart rate is 220 - 30 = 
190bpm. Furthermore, 190 - 60 = 130bpm. So, for calculating the 50%, 130 * 0.5 + 
60 = 125bpm. 
 
In our project we created the heart.function.php file for estimating the target heart rate 
zones. When the user clicks on “Show Heart Rates” tag the function “restinghr” is 
called which presents 3 text boxes the user must complete by giving his resting heart 
rates for 3 days. After entering these values, the “heart” function is called having as 
arguments the resting heart rate values. The above procedure of Karvonen formula is 
applied for getting the target heart zones for the individual, providing some 
information of what each zone stands for. The values from the above procedure are 
passed as parameters in the jpgraph file “heartgraph.php” for plotting the results.  
 
Apparently, the user would like to know how his heart rate values were, during his 
weekly activity. For that reason we made an estimation of his heart rate values on 
both an hourly basis and during each quarter of the hour for more analytical 
37 | P a g e  
 
information. For succeeding the above idea, we had to find a way to calculate the 
heart rate from the data we already had in our database. We found that there is a 
correlation of heart rate with the VO2 values we described above. More specifically, 
A group of researchers from Denmark concluded to the equation below: 
 
 
 
Figure 3.3: VO2 max from heart rates [69] 
 
 
 So, we calculated the VO2 max value of the individual by knowing the both the 
maximum and the resting heart rate values. Moreover, as Swain et al proposed [70]:  
“%MHR = 0.64 ? %VO2 Max + 37” 
This means that we can calculate the percentage of maximum heart rate given a 
percentage of VO2 max value. In the previous section we described how we 
calculated the VO2 values for each hour using the Frank Horwill equation. So, we 
calculated the VO2 values for each hour following the procedure from the previous 
section and by applying these values to the above equation (where %VO2 max is the 
division of each VO2 value with the VO2 max from Figure 3.3) we calculated the 
heart rate values for each hour. These values are passed as parameters to 
“heartrategrpah.php” jpgraph file for their representation.  
Furthermore, we tried to give some more analytical results to the user by calculating 
the heart rates during each quarter of the hour, because it is well-known that heart rate 
values can increased or decreased rapidly during short time intervals. We followed the 
above process with the only difference that we had to make some more programming 
for getting our values through each quarter of each hour. As before, these values are 
passed to the correspondent jpgrpah file (“heartratequarter.php”) for their 
representation. Furthermore, there are 2 drop down menus which interact each other 
for selecting both the date and the specific hour you want to see heart rates from.  
 
3.6.6 Implementation of fitness goals 
A very useful functionality in our application is the option which is given to the user 
to define a fitness goal and to track his progress through the duration he decides by 
knowing his health results. This idea is very extensible both on defining a lot of 
different fitness goals and how the user learns about his progress, by seeing his results 
or by being provided with some feedback. For getting started with the above idea we 
give the user the opportunity to select a fitness goal and define some of its parameters 
and present to him some feedback based on his weekly results from the data he have.  
First of all, we had to create a new file (“target.function.php”) in which we 
implemented this option. When a user selects the “Choose Fitness Goal” tag the 
38 | P a g e  
 
“target” function is called which generates some radio buttons for selecting the 
desired goal. Unfortunately, we didn’t have the time for implementing more than one 
fitness goals. The one which works is the “Losing Weight”. By selecting this goal the 
“showtarget” function is called having the argument from the previous option of the 
selected goal and generates 2 text boxes where the user has to complete how many 
kilos he wants to lose and in how many weeks. After submitting his options the 
“loseweight” function is called which is responsible for providing the appropriate 
feedback to him.  
We found that in order a person to lose 1 pound per week he has to burn 250 calories 
daily through intense exercise [71]. We know that 1 pound corresponds to 0.45359237 
kilos. So, by using the user inputs (how much kilos, how many weeks) we calculated 
how many calories he must burn daily by exercising. As we described in 3.6.3 section 
we calculated the BMR and BMI values which is very important in that case. The 
only difference is that we calculated the BMI the user will have after completing his 
goal in order to know if the goal he chose is good enough for him. Furthermore, we 
had to calculate the calories he burned daily with intense exercise (it is different from 
3.6.3 section because we now calculate only the calories he burned during high 
activity). We made 2 SQL queries for getting both the steps the user made during the 
whole week and the activity counter for each minute. Moreover, we made another 
SQL query for getting the total minutes of each day the individual exercised. After 
experimenting with our data and by interaction with SLCMSR we defined that in 
order someone to exercise intensely, the activity counter must have a value greater 
than 0.75. So, we took into consideration only the steps he took with the appropriate 
activity counter. In that way we calculated the total calories he burned each day. 
 
3.7 Summary  
In this chapter, we tried to explain with as many as possible details how we managed 
to build our application. We described both some difficult problems we had to face 
and how we managed to bypass them. Moreover, we described the techniques we used 
and the research which was made for getting the desired results of our ideas. In the 
next chapter we will present the results of our implementation by giving some more 
details about them.  
 
 
 
 
 
39 | P a g e  
 
CHAPTER 4 
 
Results 
 
 
4.1 Introduction 
In this chapter we will demonstrate our results from the implementation of our 
application. We will present the plots that were generated from our work and were 
implemented with the help of jpgraph. Because our project is based on an existing 
platform and we extended it by adding our features, we will show some screenshots 
which were taken from our application while it was running. Moreover, some more 
details for explaining our results will be given for making them more understandable 
to the reader than maybe were from our implementation analysis. We will present our 
results in separate sections as we did in our previous chapter and we will show one 
plot or screenshot for each different result of our project. We have to mention that in 
order to achieve our goal we correlated the data we got from actibelt® with the 
personal information of the user we created because we didn’t know the actual 
personal information of the patient whose data was given to us.   
 
 
4.2 Plots of actibelt® data 
In this section, we will present the data we have from SLCMSR and we will show the 
graphical representation of them as they implemented in the way we described in our 
previous chapter.  
 
4.2.1 Weekly stats 
This section presents the data which are weekly summaries from patient’s activity. 
These data contain information about how many minutes of low, medium and high 
activity the patient made, how much his activity temperature was and how many 
walking and running steps he took each day. 
 
40 | P a g e  
 
4.2.1.1 Minutes of low activity 
The figure below represents the total minutes of low activity of the patient (blue line) 
along with the total minutes of measurements (red line). As we can notice, during the 
most time of this week, the patient was standing, lying or sitting something which 
denotes low activity.   
 
 
Figure 4.1: Minutes of low activity per day vs. duration of measurements 
 
 
 
 
4.2.1.2 Minutes of medium activity 
The next figure presents the total minutes of patient’s medium activity (blue line) 
along with the duration of measurements in minutes (red line). We can notice that the 
individual didn’t spend a lot of hours of walking during each day. More specifically 
he walked the first day for about 1 hour, the third and the sixth day for about 1 and a 
half hour, the fourth and the fifth day for about 2 hours and the second and the 
seventh day for about 3 hours.    
41 | P a g e  
 
 
Figure 4.2: Minutes of medium activity vs. duration of measurements 
 
4.2.1.3 Minutes of high activity 
The next figure represents the total minutes per day of patient’s high activity (blue 
line) along with the duration of measurements the correspondent day (red line). 
Apparently, the patient didn’t make any intense exercise and more specifically 
running, through the whole week except the third day which ran for 57 minutes.   
 
 
Figure 4.3: Minutes of high activity vs. duration of measurements 
42 | P a g e  
 
4.2.1.4 Activity temperature 
The next plot describes the average values of activity temperature as it were recorded 
from actibelt® for the current patient. Unfortunately, no further information were 
given to us with some more details about this type of data, but we had to plot it 
because is one of the recordings of actibelt®. 
 
 
Figure 4.4: Activity temperature average values per day 
 
 
 
4.2.1.5 Walking vs. running steps 
The last figure of weekly stats represents the total steps the patient took during each 
day. The blue line indicates the walking steps and the red the running steps. As we 
can notice these results are in agreement with the minutes of medium and running 
activity because medium activity corresponds to walking and high activity 
corresponds to running as we described before. Moreover, we have to mention that the 
distinction between walking and running steps was made by measuring short intervals 
without ground contact in order to define the running steps.  
 
43 | P a g e  
 
 
Figure 4.5: Walking steps vs. running steps per day 
 
 
 
4.2.2 Daily stats 
The more analytical representation of patient’s data is given in this section. His data, 
are represented analytically for each minute and user have the option to select both the 
date and the specific hour for seeing the steps he took during each minute and what 
value the activity counter had during this minute. The Figure 4.6 gives the option to 
user to select the date he wants and after selecting it the following 2 figures (4.7, 4.8) 
present his data as they recorded from actibelt®. During this representation of data, 
the user has the option to change the hour he wants to see with the help of a drop 
down menu which contains all 24 possible hours. Two random figures were selected 
demonstrating these results which represent the values from 14:00-14:59 on 
09/06/2009. 
44 | P a g e  
 
Figure 4.6: Date selection for presenting analytical daily stats per minute 
 
Figure 4.7: Number of steps the individual took between 14:00-14:59 on 09/06/2009 
 
Figure 4.8: Activity counter values per minute between 14:00-14:59 on 09/06/2009 
45 | P a g e  
 
4.2.3 Hourly stats 
The following figures present the steps who took the individual and the activity 
counter per hour through each day. The user can select the day he wants to see his 
stats from a drop down menu which presents all days from the week. This hourly 
representation of data gives the user a more generic view of his stats during the whole 
day. So, in combination with both the daily stats we described above and the weekly 
stats, he has a very analytical view of his recordings from actibelt®. As before, 2 
figures were selected randomly for demonstrating our work. 
 
 
Figure 4.9: Steps the individual took per hour on 05/06/2009 
 
 
Figure 4.10: Average activity counter values per hour on 05/06/2009 
 
 
46 | P a g e  
 
4.3 Metabolic equivalent stats 
As we described in the previous chapter, Metabolic Equivalent (MET) defines the 
energy which spends the individual by doing some activities. A better view which 
summarizes some activities and how many MET corresponds to each one of them can 
be found on the table which was given from The Compendium of Physical Activities 
Tracking Guide [59]. In our project we tried to make a summary of how many was the 
METs from the patient during his daily activity. We have to remind that 1 MET is 
defined as the energy to lie/sit quietly. So, the user can make an estimation of how 
much energy spent during each day separately. As we can notice from the Figure 4.11, 
we can see that the biggest amount of energy which was spent was during the fourth 
and the fifth day of the week. It is very important to notice that even if the user made 
intense exercise only on 07/06/2009 for 57 minutes (see Figure 4.3), he spent more 
energy on the next two days something that underlines that intense exercise is not 
enough by itself to define the amount of energy spent and it is obvious that someone 
who is exercising with not too much intensity but with bigger duration, spends more 
energy.    
 
 
Figure 4.11: Summary MET values per day 
 
 
 
 
47 | P a g e  
 
4.4 Calories, BMR and BMI 
One of the most interesting aspects of our project is the representation of how many 
calories the patient burned during his daily activity. As we explained in the previous 
chapter we tried to make an estimation of burned calories on an hourly basis. The 
Figure 4.12 below describes our results from a randomly selected date. The user can 
select the date he wants to see his stats from a drop down menu. We have to notice 
that this calculation is based only on the weight of the individual and the distance he 
covered (the steps he took). That’s why there are some zero values per hour 
something which is unrealistic because it is well known that even if an individual does 
not cover any distance he burns some calories. So, the zero values in our plot denote 
that the patient didn’t move during this hour. Also, we have to mention that we used 
the personal information of the virtual patient which was created (me) with the weight 
value to be 100 kilos, because we didn’t have the real one whose data were given to 
us.  
Moreover, we made a summary of total calories which were burned during the 
selected date and also we presented the BMR and BMI values for the user which were 
described analytically on section 3.6.3. Because BMR uses on its calculation the 
weight, the height and the age of the individual and the BMI the weight and the height 
the values presented in Figure 4.13 concern the virtual patient only and they have 
nothing to do with the data we have. The value of the weight as we mentioned above 
is 100 kilos, the height 185 cm and the age 25 years old.  
 
Figure 4.12: Calories burned per hour 09/06/2009 
48 | P a g e  
 
Figure 4.13: Total calories burned on 09/06/2009 along with user’s BMR and BMI values 
 
 
4.5 Maximum oxygen consumption (VO2 max) 
The maximum oxygen consumption is a measure of a person’s aerobic fitness. This 
measure is very useful for someone who wants to be informed about the intensity of 
his activity. In our project we tried to calculate daily average VO2 values for each 
hour separately. The user can select the date he wants and to see his VO2 scores per 
hour for the selected date. The Figure 4.14 describes the VO2 values on 07/06/2009. 
This date was selected to point out how the VO2 value is increased during intense 
exercise, because as we can see from Figure 4.3 on this date the patient made intense 
exercise for 57 minutes. Obviously, this exercise took place between 15:00-15:59 (the 
16th hour of the day). Moreover, the value of VO2 when the person is resting is 3.5 
ml/kg/min and this means that during this hour the person didn’t make any physical 
activity. Also, someone can notice if these scores define a good level of physical 
activity with the help of a table which shows how good these scores according to the 
age of individual are [72]. 
 
49 | P a g e  
 
 
Figure 4.14: Average maximal oxygen consumption values per hour on 07/06/2009 
 
4.6 Heart rates 
The heart rate of a person is without any doubt a very vital measurement. That’s 
because is the most accurate method on defining how intense was his exercise. During 
daily exercise, someone wants to know how his heart rate was, in order to know in the 
future if he has to try harder to achieve the desired results. In our project, by knowing 
some vital parameters from user (weight, height, age, sex) along with the distance he 
covered on each minute, we only have to know his resting heart rate for implementing 
our goal. As we described on section 3.6.5 we found a way to determine person’s 
maximum heart rate, his target heart rate zones and also the heart rate values 
depending on his activity both on an hourly basis and during each quarter of the hour.  
Figure 4.15 asks from user to enter his resting hear rates for 3 days. Afterwards with 
the Karvonen formula the maximum heart rate of the user is determined along with 
the heart rate zones (Figure 4.16). Moreover, there is an explanation of each target 
zone (Figure 4.17) in order the user to know what value should have his heart rate 
during exercise. For example, if the user wants to start burning fat he must training 
with his heart rate values to be between 50%-60% of his maximum heart rate.  
Furthermore, we presented the hourly heart rates on Figure 4.18. The user can select 
the date he wants from the drop down menu and to see his stats. We are showing the 
results from 07/06/2009 because as we mentioned before, during this day the user 
exercised intensively for about an hour. As we can notice from the figure, during the 
hour of intense exercise the user’s heart rate has a value of 158 bpm (beats per 
minute). This means that he was exercised with his heart rate to be on an average 
value of 70% of maximum heart rate (195 bpm), something which points out that he 
was training between aerobic and steady state of heart rate zones.  
50 | P a g e  
 
Additionally, we calculated more analytically his heart rate during each quarter of the 
hour (Figure 4.19). This approach gives a very detailed view of patient’s results. We 
selected to show the 16th hour (15:00:15:59) on 07/06/2009 where we had the most 
intense exercise. As we can notice from the Figure 4.19 the actual intense activity of 
the patient was during the first 3 quarters of the hour with the heart rate reaching a 
value of 168 bpm (approximately 78% of maximum heart rate). This means that by 
viewing the results of a patient in a more detailed form, we can determine more 
accurately his actual heart rates (he trained for a long period of time with 78% of 
maximum heart rate instead of 70% we presented on an hourly basis).   
Figure 4.15: User enters his resting heart rates for 3 days 
 
Figure 4.16: Calculation of percentages of maximum heart rate 
51 | P a g e  
 
 
Figure 4.17: Information about the heart rate zones 
 
 
Figure 4.18: Average heart rate values per hour on 07/06/2009 
 
52 | P a g e  
 
Figure 4.19: Average heart rate values per quarter between 15:00-15:59 on 07/06/2009 
 
 
4.7 Fitness goals 
One of the most important aspects of our project is the option which is given to the 
user to define some fitness goals and to be provided with some feedback. Due to lack 
of time we managed to implement one fitness goal (weight loss). After the user 
defining his goal (weight loss in our case) he must select how many kilos he wants to 
lose in how many weeks (Figure 4.20). After defining these parameters the Figure 
4.21 is presented to him. First of all the current goal is determined by making 
estimation of how many calories he must burns daily in order to achieve his goal. 
Moreover, there is information of how many calories he must take daily for 
maintaining his weight (BMR) and how much will be this value after completing his 
goal. Furthermore, the current status concerning his weight is presented (BMI) which 
determines if the person is underweight, normal, overweight or obese and also there is 
the correspondent information of his future status after completing his goal. Finally, 
the weekly results are presented to the user which show if he managed to achieve his 
goal by presenting the number of calories he burned daily. Unfortunately, because we 
had data for only 1 week we couldn’t provide any further information to the user in a 
goal with duration more than 1 week as you can see from our example whose duration 
is 3 weeks. We have to remind the reader that exercise which required on completing 
the goal of losing weight includes only intense exercise and that’s why in our results 
we have 6 days with zero values (see Figure 4.3).  
 
53 | P a g e  
 
Figure 4.20: User selects the number of kilos he wants to lose and in how many weeks 
 
Figure 4.21: The information which is provided to the user after defining his goal 
 
4.8 Summary 
In this chapter we demonstrated our results from the implementation of our project. 
We tried to explain them with as many details as possible and to give the reader a 
generic view of how our application works. One figure of each different result of our 
project was presented. In the next chapter we will try to make a critical evaluation of 
our work and to describe some future work on this project because it can be extended 
with many new features.  
54 | P a g e  
 
CHAPTER 5 
 
Critical evaluation and conclusions 
 
 
5.1 Introduction 
In this chapter we will try to make an evaluation of our work. We will explain if our 
project completed its objectives and how they were implemented. Moreover, we will 
discuss if our tools and our methods which were used, were the best ones. Moreover 
we will give conclusions for each chapter separately by discussing their results. 
 
5.2 Achievement of aims and objectives  
Our objectives, in general, were completed. As we said, our goal was to implement an 
application of personalized medicine which will give the users the possibility to see 
analytically their data as they recorder from a medical device, like pedometer, and to 
calculate some more vital parameters which were not available from this device. 
Moreover, our grand goal we had in mind was to provide feedback to the user and 
some more suggestions concerning his health through some fitness goals who defined.  
First of all, our wish was to use a well-known and reliable platform for building our 
application. That’s because we wanted future users not to be cautious about its use 
and they can trust it on sharing some personal medical information. The platform 
which was open sourced and we decided to build on it our approach was the Indivo 
platform. This choice was the result of interaction with Dossia which was our first 
candidate platform. It is obvious that by making our application from scratch would 
be much easier, because practically our project would be a simple web application. 
With the use of a new platform which is used from many researchers we contributed 
to its functionality by adding some new features.  
After deciding to use Indivo platform, we had to find a way to use it. First of all we 
had to install it on our computer for starting making our work. This turned out to be 
more difficult than we expected because Indivo uses a lot of tools with many 
dependencies for making it run successfully. After trying without success for a lot of 
hours to setup this platform, we managed to install it after interaction with a member 
of Indivo forum, without the help of whom we wouldn’t make it and maybe we would 
have to change our approach. 
55 | P a g e  
 
Another big risk in our project was to gain some proper medical data. After a lot of 
research and interaction with many research centers and companies we got a reply 
from SLCMSR, a research center in Munich of Germany. They understood our 
approach and presented a medical device they created in cooperation with another 
company, the actibelt®. After a lot of days interacting with SLCMSR trying to 
persuade them to send us some real data which were recorded from actibelt®, they 
finally decided to send us data from a patient’s weekly activity.  
With Indivo installed on our computer and by having some real data we had to start 
our implementation. After including the data to our database we had to find out how 
we can use them in combination with Indivo source code for making our application. 
Unfortunately, Indivo is implemented using a lot of files on xajax programming 
language. Because we were unfamiliar with xajax we had to study some tutorials in 
order to be in position to implement our ideas. Moreover we had to found a way for 
plotting the data we had along with the new vital parameters we wanted to calculate. 
For that reason we decided to use jpgraph which was already installed on Indivo 
platform but it was new to us, so we had to understand its functionality.  
Our implementation is consisted from 3 parts as we mentioned in our objectives. The 
first part is to plot as much analytically as possible the data we had from actibelt®. 
The second part was to calculate some new vital parameters which were not included 
on these data and the last part to provide some feedback to user concerning his health 
progress on defining some fitness goals. Although we implemented all these three 
parts adding a lot of functionality, there is a lot of room for improvement because it is 
an open sourced application something which makes it totally extensible and also this 
field of personal medicine is a new one and during the next years it is certain that 
many people will deal with applications like this. We present some ideas for future 
development in chapter 6.  
 
5.3 Project’s evaluation 
For our project we used some different tools and various techniques for getting our 
desirable results. Moreover we made research both on general aspects of applications 
of personal medicine and on the field of biomedicine for calculating some vital 
parameters. We will try to evaluate each of the above separately. 
First of all, in our background research, we presented some issues both ethical and 
security which concern online application for sharing medical data. Moreover we 
presented some approaches which dealt with security aspects in order to provide 
reliability and trust to the users of these applications. Although this analytical 
description of security mechanisms seems odd to our approach, by presenting them 
we want to point out the importance of security on these applications, because they 
have to do with sensitive personal information. So, someone who isn’t convinced 
56 | P a g e  
 
about how safely and anonymously his records are kept, he will not share them in an 
online application. 
In our implementation we tried to make the application to fit well on Indivo interface. 
That’s why we decided to use xajax even if we were not familiar with it, in order to 
programming in the same way as the most files of source code are implemented. 
Moreover, we used jpgraph for plotting our results because it was already installed 
and configured on Indivo source files and we wanted to make a graphical 
representation of our results which would seem nice on Indivo GUI. Even if, jpgraph 
has a lot of capabilities and there are ways of making much nicer graphs, we decided 
to plot the results as simple line plots because we think that the design of graphs is not 
too important for our project. However, nicer plots can be generated in future 
development.   
The results of our project are only our first approach to the grand goal we have in 
mind for a project like this. This means that even if we managed to calculate and plot 
a lot of them there are alternative solutions for them. More specifically, some vital 
parameters which were calculated like calories burned, maximal oxygen consumption, 
MET values and heart rates values, use some equations and methods we found on 
articles or the web. These methods were selected after a lot of research because we 
think they were the best ones for generating our results. However, maybe there are 
some other methods or formulas for calculating more accurate results. The general 
goal in our project is to give a general idea that there are ways on calculating a lot of 
vital parameters using some simple recordings (e.g. number of steps). A very vital 
aspect on our results is that, unfortunately, we didn’t know the actual identity of the 
patient whose date we were given. So, we had to generate a virtual user for getting our 
goal. Definitely, our results would be more accurate if we had the real parameters of 
weight, height, age and sex of the person whose data we used. Finally, due to lack of 
time we didn’t manage to go too far our last goal which was to provide some feedback 
to the user after selecting his fitness goal. We implemented only one goal of losing 
weight and we presented as feedback some values of calories with the results of how 
many calories he burned during the first week, because we had data only for one 
week. If we had data from many weeks, maybe we would have generated a more 
proper feedback something that will be discussed in our next chapter.  
 
 
 
 
 
57 | P a g e  
 
5.4 Conclusions 
The main aim of our project was to contribute to community of personal medicine by 
making an application which will make a data analysis of a person’s recordings from 
a medical device and will provide to this person some more vital parameters and also 
some feedback. We tried to implement a part of the general idea which takes a simple 
medical device and converts it to lifestyle advice. Moreover, we decided to use a well-
known platform for building our application and to use some real patient’s data for 
providing some real results of our application. 
In chapter 2, we made background research in the field of personal medicine and we 
presented the most vital issues of them along with some approaches which tried to 
improve the security of these applications. Furthermore, we gave a general description 
both of Indivo platform and actibelt® which were used for our implementation. 
Finally, we described the top three applications until today for sharing personal 
medical information online. 
In chapter 3, we described the whole process of implementation. We gave a general 
description of our approach with some possible risks and we gave some methods 
which were used for the installation of Indivo platform. Moreover, we described 
analytically the date we were given and also our tries to understand the functionality 
of Indivo for building our application. Furthermore, we described analytically every 
feature we implemented, giving some background information were it was necessary 
in the calculation of some vital measurements. 
In chapter 4, we presented the results of our project. The majority of them ended on a 
graphical representation of some values. Moreover we pointed out some vital aspects 
on these results and we tried to give a complete view of how our application looks 
like. 
In this chapter we made a critical evaluation of our project. We made an evaluation of 
the aims and objectives of our project and also we tried to evaluate our decisions on 
building the application based on the methods and the tools we used and the results 
we got.  
In the next chapter we will try to make some suggestions for future work in our 
project because even if we managed to implement a lot of features there is still much 
room for improvement.  
 
 
 
 
58 | P a g e  
 
CHAPTER 6 
 
Future work 
 
6.1 Introduction 
In this chapter we will try to give some ideas for future development. Because our 
project is a part of a new rising field of science, the personal medicine, there is a lot 
room for improvement. First, we will give some ideas for making some extensions in 
our application. Then, we will present some new ideas on the field of personal 
medicine which would be very helpful to every people.  
 
6.2 Extensions in our project 
We discussed in the previous chapter why we used some specific methods and tools 
for achieving our aims. Although they were seemed the more suitable to us for 
representing our results there is still room for improvement for getting even better 
results. 
First of all we represented the data we got from actibelt® in 3 formats. We made a 
weekly representation, an hourly representation and a minute by minute 
representation. However, someone can focus more on the data representation by 
making even more plots by combining some data of them and to give a better 
analytical view of them to the user. 
Moreover, due to lack of time we didn’t focus on making some real nice designed 
plots for making the application looks better. The tool we used (jpgraph) offers a lot 
of possibilities for making professional quality graphs and someone can focus on it for 
generating better images than us. 
Furthermore, we calculated some vital measurements which are not recorded from a 
specific medical device. These measurements are the result of combination of the data 
we have along with some methods and formulas we found though research. 
Apparently, there are more vital measurements that can be calculated using the current 
data we have. Moreover, maybe there are more accurate techniques which can use 
these data and to provide better results. Someone who is interested on generating 
more vital parameters for the user with more accuracy can focus on this area of our 
project. 
59 | P a g e  
 
Finally, our last objective was to give the possibility to user to select a fitness goal and 
to provide to him some feedback concerning his results of the first week and with 
some health values. Due to lack of time and because we didn’t have data from more 
than one week, we didn’t manage to provide a complete feedback to user and also we 
managed to implement only one fitness goal (losing weight). Further development on 
this area can be the definition of more fitness goals along with some more appropriate 
feedback which concerns the progress of a person for more than one week. 
 
6.3 Further development 
Because our project is an application on personal medicine there are a lot of 
extensions which can be made for adding some new features. These extensions 
concern mainly our last objective of our project and generally our grand goal which is 
to use the application to tell people how to live their lives, in a very personal way 
based on their own very personal lifestyle and health.  
 
A first approach is to use a person’s medical data and to give him some information 
about his health status with some suggestions of things he must do or to avoid for 
improving his health. Moreover, the application by noticing his vital measurements 
during exercising, can give some recommendations for making his exercise more 
efficient [73].   
 
In addition, a feature can be created which will allow the user to update constantly his 
health status and according to his results it will define some fitness goals for 
improving his health. Then, the user can select a goal which will be tracked on a 
weekly basis informing the user if he is doing well. 
 
Furthermore, a very interesting feature is to give the person the possibility to select an 
exercising program such as swimming, biking, playing football with friends and 
comparing his recordings from a medical device (like actibelt®) with some average 
physical values of this exercise to determine if this kind of exercise suits to this user 
and how vigorous is. Also, a good idea is this feature to support the selection of a 
combination of these exercises in order to provide the person which one of them is 
more effective for him [74].  
 
Apparently, there are a lot more ideas on utilizing an application like ours. Apart from 
the above possible extensions, the general idea is the creation of a system which will 
change people lives in the near future. People can use this system not only for keeping 
their data, but also as a personal lifestyle advisor. With that system they will manage 
to keep their fitness in a very good level. The latest years even more scientists and 
researchers try to find ways for intriguing people to use applications for keeping their 
medical data. It is certain, that this field of personal medicine has great future and on 
these applications there still much room for improvement. In the future, almost 
everyone will keep an online medical account for tracking his health status and to 
keep it in his desired levels.  
 
 
60 | P a g e  
 
Bibliography and links 
 
[1] http://www.openclinical.org/emr.html#benefits 
[2] Bonnie Rochman, When Patients Share Medical Data Online, TIME, February 8, 
2010. http://www.time.com/time/magazine/article/0,9171,1957460,00.html 
[3] Pew Internet and American Life Project. The online health care revolution: how 
the web helps Americans take better care of themselves. http://www.pewinternet.org. 
[4] Eysenbach G, Sa ER, Diepgen TL. Shopping around the Internet today and 
tomorrow: towards the millennium of cybermedicine. BMJ. 1999;319 
[5] Diaz et al. Patient’s Use of Internet for Medical Information. JGIM. 2002;17:180-
185. 
[6] Canadian Internet Use Survey, The Daily, August 15, 2006. 
http://www.statcan.gc.ca/daily-quotidien/060815/dq060815b-eng.htm 
[7] Electronic Medical Records Sound Good, Privacy an Issue, Government 
Technology Survey, February 9, 2007. 
http://www.govtech.com/gt/103868?id=103868&full=1&story_pg=1 
[8] Katherine Hobson, Patients May Lie if Electronic Records are Shared, The Wall 
Street Journal, April 13, 2010. http://blogs.wsj.com/health/2010/04/13/survey-
patients-may-lie-if-electronic-medical-records-are-shared/tab/article/ 
[9] Maggie Scarf, Keeping Secrets, N.Y. Times, June 16, 1996, para.6, at 38. 
[10] Computer Science and Telecommunications Board NRC. For the record: 
protecting electronic health information. Washington, DC: National Academy Press, 
1997. 
[11] Institute of Medicine, Health Data in the Information Age. 
Washington, DC: Natlonal Acad. Press, 1994. 
[12] Reid Cushman, Information and Medical Ethics: Protecting Patient Privacy, 
IEEE Technology and Society Magazine, Fall, 1996. 
[13] Equifax-Harris Mid-Decade Consumer Privacy Survey 1995 New York, NY: 
Louis Harris and Assoc., 1995. 
 
[14] William L Manning, Privacy and Confidentiality in Clinical Data Management 
Systems: Why You Should Guard the Safe, Clinical Data Management, Summer, 
1995. http://www.netreach.net/~wmanning/cdm.htm 
61 | P a g e  
 
[15] Lincoln D. Stein, The Electronic Medical Record: Promises and Threats, Web 
Journal, Vol.2, 1997 http://oreilly.com/catalog/wjsum97/excerpt/ 
[16] Krzysztof J. Cios, G. William Moore, Uniqueness of Medical Data Mining, 
Artificial Intelligence in Medicine, 2002. 
[17] Charity Scott, Is Too Much Privacy Bad For Your Health? An Introduction to the 
Law, Ethics and HIPPA Rule On Medical Privacy, Privacy and Healthcare, p.481-
529, 2001. 
[18] American Med. Ass’n, Code of Medical Ethics, Fundamental Elements of the 
Patient-Physician Relationship, Element No.4, reprinted in CODES OF 
PROFESSIONAL RESPONSIBILITY, supra note 58, at 342. 
[19] Thomas Lee, Too Much Privacy Is a Health Hazard, NEWSWEEK, Aug.16, 
1999, at 71. 
[20] HIPAA Basics: Medical Privacy in the Electronic Age, Privacy Rights 
Clearinghouse. http://www.privacyrights.org/fs/fs8a-hipaa.htm 
[21] Medical Records Privacy, Privacy Rights Clearinghouse. 
http://www.privacyrights.org/fs/fs8-med.htm#B 
[22] Personal Health Records and the HIIPAA Privacy Rule. 
http://www.hhs.gov/ocr/privacy/hipaa/understanding/special/healthit/phrs.pdf 
[23] Online Personal Health Records: Are They Healthy for Your Privacy?, Privacy 
Rights Clearinghouse. http://www.privacyrights.org/ar/Alert-PersonalHealthRecords-
090421.htm 
[24] Stefanos Gritzalis, Costas Lambrinoudakis, Dimitrios Lekkas, Spyros Deftereos, 
Technical Guidelines for Enhancing Privacy and Data Protection in Modern 
Electronic Medical Environments, IEEE Transactions on Information Technology in 
Biomedicine, Vol.9, No.3, September 2005 
 
[25] Philip D. Quarles, Thomas Martin, Safeguarding the Security of Clinical Data, 
Bio-IT World, May 6, 2010. http://www.bio-
itworld.com/archive/091103/horizons_security.html 
[26] Latanya Sweeney, Guaranteeing Anonymity When Sharing Medical Data, The 
Datafly System, MIT Artificial Intelligence Laboratory Working Paper, Cambridge, 
1997. 
 
[27] Hundepool, A. and Willenborg, L. ?- and ?-argus: software for statistical 
disclosure control. Third International Seminar on Statistical Confidentiality. Bled: 
1996. 
 
[28] Latanya Sweeney, Maintaining Patient Confidentiality When Sharing Medical 
Data 
62 | P a g e  
 
Requires a Symbiotic Relationship Between Technology and Policy, Massachusetts 
Institute of Technology Artificial Intelligence Laboratory, May, 1997  
 
[29] Rivest R, The MD5 Message-Digest Algorithm, Request for Comments: 1321 
[30] SHA-1 Digest, World Wide Web Consortium. http://www.w3.org/TR/1998/REC-
Dsig-label/SHAI-1_0. 
[31] Bouzelat H, Quantin C, Dusserre L. Extraction and anonymity protocol of 
medical file. Proc AMIA Annu Fall Symp 1996;323–27. 
 
[32] Jules J. Berman, Confidentiality Issues for Medical Data Miners, Artificial 
Intelligence In Medicine 26,  p.25-36, 2002 
[33] http://info.ssl.com/article.aspx?id=10241 
[34] http://www.geocerts.com/ssl/how_ssl_works 
[35] https://ssl.trustwave.com/support/support-how-ssl-works.php 
[36] Fahed Al-Nayadi, Jemal H. Abawajy, An Authentication Framework for e-Health 
Systems, IEEE International Symposium on Signal Processing and Information 
Technology, 2007 
 
[37] Ye Tian, Hao Lei, Liming Wang, Ke Zeng, Toshikazu Fukushima, A Fast Search 
Method For Encrypted Medical Data, IEEE Xplore, 2009 
[38] Kenneth D Mandl, William W Simons, William CR Crawford,  and Jonathan M 
Abbett. Indivo: a personally controlled health record for health information exchange 
and communication. BMC Med Inform Decis Mak. 2007; 7: 25. 
[39] Simons WW, Mandl KD, Kohane IS. The PING personally controlled electronic 
medical record system: technical architecture. J Am Med Inform Assoc. 2005;12:47–
54. 
[40] Healthcare Information Technology Standards Panel 
http://www.ansi.org/standards_activities/standards_boards_panels/hisb/hitsp.aspx?me
nui d=3 
[41] Towards a Norwegian implementation of electronic personal health records 
http://ftp.informatik.rwth-aachen.de/Publications/CEUR-WS/Vol-219/paper05.pdf 
[42] http://www.actibelt.com 
[43] http://www.trium.de/03_ct_engine/beschreibung_en.html 
[44] https://www.google.com/health 
[45] http://www.healthvault.com 
63 | P a g e  
 
[46] http://www.dossia.org/ 
[47] http://www.slcmsr.net/ 
[48] http://wiki.indivohealth.org/index.php/Installation:3.1_User_Interface 
[49] http://wiki.indivohealth.org/index.php/Installation:3.1_Server_and_Store 
[50] http://sourceforge.net/projects/indivo/files/ 
[51]http://wiki.indivohealth.org/index.php/Installing_Indivo_Server_%28Tomcat_Wi
ndows%29 
 
[52] http://wiki.indivohealth.org/index.php/Config.xml.php_Explained 
 
[53] http://mail.chip.org/mailman/listinfo/indivohealth 
 
[54] http://lib.stat.cmu.edu/datasets/ 
 
[55] http://www.xajax.net/ 
 
[56] http://jpgraph.net/ 
 
[57] http://doc.async.com.br/jpgraph/html/3020lineplot.html 
 
[58] Appendix 1. Translating Scientific Evidence About Total Amount and Intensity 
of Physical Activity Into Guidelines 
 http://www.health.gov/PAGuidelines/guidelines/appendix1.aspx 
 
[59] Barbara E. Ainsworth, William L. Haskell, Meliccia C. Whitt, Melinda L. Irwin, 
Ann M. Swartz, Scott J. Strath, William L. O'brien, David R. Bassett, jr., 
Kathryn H. Schmitz, Patricia 0. Emplaincourt, David R. Jacobs, jr.. and Arthur S. 
Leon, Compendium of Physical Activities: an update of activity codes and MET 
intensities. Med. Sci. Sports Exerc., Vol. 32, No. 9. 
 
[60] Michelle Martin, How to Convert Steps to Calories Burned, November 9, 2009 
http://www.ehow.com/how_5622158_convert-steps-calories-burned.html 
 
[61] http://www.runtheplanet.com/resources/tools/calculators/caloriecounter.asp 
 
[62] http://www.fitness.com/fitness/helpbmr.php 
 
[63] http://www.calculator.net/bmi-calculator.html 
 
[64] http://www.runningforfitness.org/faq/vo2.php 
 
[65] Balke B (1963), A simple field test for the assessment of physical fitness. Civil 
Aeromedical Research Institute report, 63-68. Oklahoma City Federal Aviation 
Agency. 
 
64 | P a g e  
 
[66] Frank Horwill, Obsession for Running, Colin Davies Printers / British Milers' 
Club, 1994. 
 
[67] Edmund R. Burke, PhD, Precision Heart Rate Training, Human Kinetics 
Publishers, Inc. 1998, p. 33. 
 
[68] http://www.polarusa.com/us-
en/support/faqs?product=&category=General&documenttitle=How+to+calculate+targ
et+heart+rate+zone%3F&document=/gip/PEUS1kb-
public.nsf/web_cat/85256F470048B0BC852574FD00655BD8 
 
[69] Uth, Niels; Henrik Sørensen, Kristian Overgaard, Preben K. Pedersen, 
"Estimation of VO2max from the ratio between HRmax and HRrest--the Heart Rate 
Ratio Method". Eur J Appl Physiol. 2004 Jan;91(1):111-5.  
 
[70] Swain, DP, Abernathy, KS, Smith, CS Lee, SJ and Bunn, Target HR for the 
development of CV fitness, Medicine & Science in Sports & Exercise, 26(1), 112-116, 
1994. 
 
[71] http://www.soyouwanna.com/site/syws/loseweight/loseweight3.html 
 
[72] http://www.topendsports.com/testing/vo2norms.htm 
 
[73]http://www.bbc.co.uk/health/treatments/healthy_living/fitness/daily_howmuch.sht
ml 
 
[74]http://www.acsm.org/AM/Template.cfm?Section=Home_Page&TEMPLATE=C
M/HTMLDisplay.cfm&CONTENTID=7764 
 
 
 
 
 
 
65 | P a g e  
 
Appendix 
Parts of the source code 
We will try to give some essential parts of source code for making 
the reader to understand better our implementation. Unfortunately, 
due to lack of space we can’t include all our source code and the 
reader might have to access the whole source code for understanding 
its functionality.  
1. Modifying http.conf file for Apache configuration 
We added the following lines for properly configuring http.conf file: 
ScriptAlias /php/ "C:/Program Files/PHP"  
AddType application/x-httpd-php .php .php5  
Action application/x-httpd-php "/php/php-cgi.exe"  
SetEnv PHPRC "C:/Program Files/PHP"   
#BEGIN PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL  
PHPIniDir "C:/Program Files/PHP/"  
LoadModule php5_module "C:/Program Files/PHP/php5apache2_2.dll"  
#END PHP INSTALLER EDITS - REMOVE ONLY ON UNINSTALL 
 
2. PEAR configuration 
We had to run the following commands for properly configuring 
PEAR: 
Run pear install DB.  
Run pear install Log. 
Run pear install Config. 
Run pear install XML_parser. 
Run pear install XML_util 
 
3. Creating SQL tables for installing Indivo 
We ran the following SQL commands in order to create the 
necessary tables for Indivo platform: 
CREATE TABLE `log` ( 
  `LogDate  `datetime NOT NULL default '0000-00-00 00:00:00', 
  `LogTime  `float NOT NULL default '0', 
  `Class` varchar(100) default NULL, 
  `Function  `varchar(100) default NULL, 
  `Filename` varchar(255) NOT NULL default '', 
  `Line` int(10) unsigned NOT NULL default '0', 
  `SessionID` varchar(45) default NULL, 
  `Message  `text NOT NULL, 
  `Flag` int(10) unsigned NOT NULL default '0', 
  `Priority` int(10) unsigned NOT NULL default '0', 
  `id` varchar(13) NOT NULL default '0', 
  `Ident` varchar(16) NOT NULL default '', 
  PRIMARY KEY  (`id`), 
  KEY `Index_Log_SessionID` (`SessionID`), 
  KEY `Index_Log_Level` (`LogDate`) 
); 
 
CREATE TABLE `priority` ( 
  `PriorityId` int(11) NOT NULL default '0', 
  `Description` varchar(45) NOT NULL default '', 
  PRIMARY KEY  (`PriorityId`) 
); 
 
INSERT INTO `priority` (`PriorityId`,`Description )` VALUES  
 (0,'Emergency'), 
 (1,'Alert'), 
 (2,'Critical'), 
 (3,'Error'), 
 (4,'Warning'), 
 (5,'Notice'), 
 (6,'Information'), 
 (7,'Debug'); 
 
CREATE TABLE `logins` ( 
  `userid  `varchar(255) NOT NULL default '', 
  `datein  `datetime NOT NULL default '0000-00-00 00:00:00', 
66 | P a g e  
 
  `dateout` datetime default NULL, 
  `sessionid` varchar(50) NOT NULL default '', 
  `ipaddress` varchar(50) default '' 
); 
 
CREATE TABLE invite (  
   inviteId     varchar(36) NOT NULL, 
   toEmail      varchar(255) NOT NULL, 
   fromUsername varchar(255) NOT NULL, 
   newUsername  varchar(255) NULL, 
   sentDate     datetime NOT NULL DEFAULT '0000-00-00 00:00:00', 
   newDate      datetime NULL, 
   fromEmail    varchar(255) NOT NULL, 
   flag         int(10) NOT NULL DEFAULT '0', 
   PRIMARY KEY(inviteId) 
); 
 
CREATE TABLE mednames (  
   medname varchar(255) NOT NULL, 
   batchid varchar(32) NOT NULL, 
   PRIMARY KEY(medname,batchid) 
); 
 
4. Import data to MySQL database 
We used the following commands for importing the data we got into 
our database in exactly the same format as they were given to us. We 
present only 2 of them. Similar commands were used for the other 
files of data. 
load data local infile 'C:/2009-06-08.csv' into table records fields terminated by ', '  
enclosed by '' lines terminated by '\n'  (@date, count, steps)  set date = 
str_to_date(@date,'%m/%d/%Y  %H:%i:%S %p') 
load data local infile 'C:/summaries.csv' into table sums fields terminated by ',' 
enclosed by '' lines terminated by '\n' (@date, meastime, 
timeinactive,timeactive,timeexercise,activitytemp,walkingsteps,runningsteps) set 
date = str_to_date(@date,'%m/%d/%Y')  
 
5. Parts of source code from xajax functions 
We will present some vital parts of our code for implementing our 
ideas. 
5.1 stats.function.php  
.... 
$db = DB::connect(DATABASE_DSN);  
if (!PEAR::isError($db)) {   
$sql = "SELECT date from records where date like '$days $time'";  
  $result =& $db->query($sql); 
  $i=0; 
  while($result->fetchInto($row)) 
  { 
 $temp=strstr($row[0], ':'); 
  $date[$i++]=(int)substr($temp, 1,-3); 
  } 
  .... 
$objResponse = new xajaxResponse(); 
$objResponse->addAssign("rightpane","innerHTML",createPageTitle('ACTIBELT 
MEASUREMENTS', 'Steps / Activity Counter (per Minute)')); 
 $steps = join(',', $steps); 
 $date = join(',', $date); 
 $count = join(',', $count); 
67 | P a g e  
 
 $img='<img src="'.SITE_URL.'/resources/php-growth-
charts/stepsgraph.php?steps='.$steps.'&date='.$date.'" />'; 
 $img2='<img src="'.SITE_URL.'/resources/php-growth-
charts/activitygraph.php?count='.$count.'&date='.$date.'" />'; 
.... 
5.2 calories.function.php 
.... 
$demo = getDemographics(); 
$sex = $demo->getSex()->getCode(); 
$vitals=getvitals(null,DEFAULT_ITEMS_PER_PAGE); 
if($sex=="M"){ 
$bmr= round(66 + ( 13.7 * $vitals[1] ) + ( 5 * $vitals[2] ) - ( 6.8 * $vitals[0] )); 
} 
else if($sex=="F"){ 
$bmr= round(655 + ( 9.6 * $vitals[1] ) + ( 1.8 * $vitals[2] ) - ( 4.7 * $vitals[0] )); 
} 
else{ 
$objResponse->addAppend("rightpane", 'innerHTML', "<p 
class=\"notification\"><b>No vitals data available.</b> 
".SUBSCRIPTION_TEASER."</p>"); 
$objResponse->addScript("fader.fadeOut();"); 
$api->getLogger()->log("Returning..."); 
$api->getLogger()->log($objResponse->getXML()); 
return $objResponse->getXML(); 
} 
.... 
function getvitals($pageNumber, $documentsPerPage) { 
$urn = 'urn:org:indivo:document:classification:medical:vital'; 
$indexDescriptor = 'VitalDateIndexer'; 
$ohl = new OrderedHeaderList($indexDescriptor, $urn); 
if (is_null($pageNumber)) { 
$pageNumber = $ohl->lastViewedPage(); 
} 
$i=0; 
while( $i<$documentsPerPage ){ 
$documents = $ohl->getPage($pageNumber, $i); 
$i++; 
if (!empty($documents)) { 
$rows = array(); 
foreach ($documents as $document) { 
   $vital = $document['body']; 
   $nameString = ''; 
   $date = ''; 
$ageString = ''; 
68 | P a g e  
 
if ($vital->isSetDate()) { 
 $date= shortDate($vital->getDate()->toGregorianCalendar()); 
 $dateTS= convertCalendar($vital->getDate()->toGregorianCalendar()); 
 $ageString= getAgeString($dateTS); 
 $age=substr($ageString,0,2); 
} 
if (!is_null($vital->getName()))  
{ 
$name= resolveCode($vital->getName()); 
$nameString= $name->Display->Value; 
$result= $vital->getResult()->get(0); 
} 
} 
if($nameString=="Weight") 
$weight = java_values($result->getValue()); 
if($nameString=="Height") 
 $height = java_values($result->getValue()); 
} 
.... 
 
 
5.3 heart.function.php 
.... 
$timear=array('00:%','01:%','02:%','03:%','04:%','05:%','06:%','07:%','08:%','09:
%','10:%','11:%','12:%','13:%','14:%','15:%','16:%','17:%','18:%','19:%','20:%','21
:%','22:%','23:%'); 
$i=0; 
$j=0; 
$steps=array(); 
for($i=0;$i<24;$i++){ 
$db = DB::connect(DATABASE_DSN);  
 if (!PEAR::isError($db)) {   
  $sql = "SELECT sum(steps) from records where date like '$days 
$timear[$i]'";  
    $result =& $db->query($sql); 
    while($result->fetchInto($row)) { 
      $steps[$j++]=$row[0]; 
  } 
 } 
} 
$max_vo2=15*$max/$rest_hr;//Uth—S?rensen—Overgaard—Pedersen estimation 
for($i=0;$i<24;$i++){ 
 $metres[$i]=1609.344*$steps[$i]/2000; 
 if($metres[$i]==0){ 
69 | P a g e  
 
  $vo2max[$i]=3.5; 
 } 
 else{ 
 $vo2max[$i]=round(0.172 *($metres[$i]/60 - 133) + 33.3,1); 
 } 
 $perc_hr=0.64*($vo2max[$i]/$max_vo2*100)+37;//David Swain (1994)  
 $hr[$i]=round($perc_hr/100*$max); 
 }  
 .... 
 
6. Parts of jpgraph files 
We will present parts from only 2 jpgraph files which were used for 
generating our plots. 
6.1 metgraph.php 
$date = $_GET['date']; 
$date = split(',', $date); 
$met = $_GET['met']; 
$met = split(',', $met); 
$g = new Graph(700,400,"auto"); 
$g->img->SetMargin(60,40,30,50); 
$g->SetScale('datlin'); 
$g->xaxis->scale->SetDateFormat("d/m/Y"); 
$g->SetTickDensity(TICKD_SPARSE,TICKD_VERYSPARSE); 
$g->yaxis->title->Set('MET'); 
$g->xaxis->title->Set('Date'); 
.... 
6.2 steps.php 
.... 
$patientPlot = new LinePlot($walkingsteps,$date); 
$patientPlot2 = new LinePlot($runningsteps,$date); 
$patientPlot->mark->SetType(MARK_UTRIANGLE); 
$patientPlot->value->show(); 
$patientPlot2->mark->SetType(MARK_UTRIANGLE); 
$patientPlot2->value->show(); 
$patientPlot->value->SetColor('blue'); 
$patientPlot2->value->SetColor('red'); 
$patientPlot->SetColor('blue'); 
$patientPlot2->SetColor('red'); 
$g->Add($patientPlot); 
$g->AddY2($patientPlot2); 
$g->Stroke(); 
